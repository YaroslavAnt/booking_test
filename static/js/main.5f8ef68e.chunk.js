(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{156:function(e,t,a){},299:function(e,t,a){e.exports=a(567)},307:function(e,t,a){},308:function(e,t,a){},309:function(e,t,a){},310:function(e,t,a){},456:function(e,t,a){},552:function(e,t,a){},555:function(e,t,a){},556:function(e,t,a){},557:function(e,t,a){},558:function(e,t,a){},559:function(e,t,a){},560:function(e,t,a){},561:function(e,t,a){},567:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(30),o=a.n(l),c=a(25),i=a(24),s=a(26),u=a(220),m=a(570),d=(a(307),a(52)),p=(a(308),a(156),a(13)),h=a(14),f=a(16),b=a(15),g=a(17),E=a(41),v=a(4),k=a(45),y=(a(309),a(222)),O=a.n(y),C=(a(310),a(43)),S=a.n(C),j="https://web-ninjas.net",I=function(e,t){return{type:"SIGNUP_SUCCESS",email:t,userId:e}},x=function(e){return{type:"SIGNIN_SUCCESS",token:e}},w=function(e){return{type:"AUTH_FAIL",err:e}},N=function(e){function t(){var e,a;Object(p.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(f.a)(this,(e=Object(b.a)(t)).call.apply(e,[this].concat(r)))).state={open:!1},a.handleClose=function(){a.setState({open:!1})},a.handleOpen=function(){a.setState({open:!0})},a}return Object(g.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=localStorage.getItem("token"),t=localStorage.getItem("email"),a=this.props.classes,n=r.a.createElement("div",null,r.a.createElement(c.b,{to:"/sign-in"},r.a.createElement(v.b,{variant:"contained",color:"secondary",className:a.margin},"Sign In")),r.a.createElement(c.b,{to:"/sign-up"},r.a.createElement(v.b,{variant:"contained",color:"secondary",className:a.margin},"Sign Up")));return e&&(n=r.a.createElement("div",null,r.a.createElement("div",{className:"controll"},r.a.createElement(v.b,{onClick:this.handleOpen},e&&r.a.createElement(v.m,{color:"secondary"},t),r.a.createElement(O.a,{color:"secondary"}))),r.a.createElement(v.k,{anchorOrigin:{vertical:"top",horizontal:"center"},open:this.state.open,onClose:this.handleClose,message:r.a.createElement(c.b,{to:"/"},r.a.createElement(v.b,{onClick:this.props.onLogOut,variant:"contained",color:"secondary"},"LogOut"))}))),r.a.createElement("div",{className:"header"},r.a.createElement(c.c,{exact:!0,to:"/"},r.a.createElement(v.m,{variant:"h1"},"BOOKING-TEST")),n)}}]),t}(r.a.Component),L=Object(i.b)(function(e){return{token:e.auth.token}},function(e){return{onLogOut:function(){return e((localStorage.clear(),sessionStorage.clear(),{type:"LOGOUT"}))}}})(Object(k.withStyles)(function(e){return{margin:{margin:e.spacing.unit}}})(N)),T=Object(k.withStyles)(function(e){return{footer:{display:"flex",justifyContent:"space-between",alignItems:"center",backgroundColor:"#111",padding:20}}})(function(e){var t=e.classes;return r.a.createElement("div",{className:t.footer},r.a.createElement(c.b,{to:"/statistics"},r.a.createElement(v.b,{variant:"contained",color:"secondary"},"Get Statistics")),r.a.createElement(v.m,{align:"right",color:"secondary"}," Made by Yaroslav Antonchyk "))}),A=function(e){return r.a.createElement("div",{className:"page"},r.a.createElement(L,null),r.a.createElement("div",{className:"page-content"},e.children),r.a.createElement(T,null))},_=(a(456),function(e){function t(){var e,a;Object(p.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(f.a)(this,(e=Object(b.a)(t)).call.apply(e,[this].concat(r)))).state={email:"",password:"",isVaild:!0},a.handleChange=function(e){return function(t){a.checkValid(),a.setState(Object(E.a)({},e,t.target.value))}},a.checkValid=function(){var e=a.state.email;a.setState({isVaild:/^[a-zA-Z0-9.!#$%&\u2019*+\/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/.test(e)})},a.handleSubmit=function(e){e.preventDefault(),a.props.userRequest(a.state),a.setState({email:"",password:""})},a}return Object(g.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,a=e.formType,n=this.state,l=n.email,o=n.password,c=n.isVaild;return r.a.createElement(A,null,r.a.createElement("div",{className:t.login},r.a.createElement(v.j,null,r.a.createElement("form",{onSubmit:this.handleSubmit,className:t.form},r.a.createElement(v.l,{error:!c,className:t.margin,name:"email",placeholder:"Email",value:l,errorText:"error",onChange:this.handleChange("email")}),r.a.createElement("br",null),r.a.createElement(v.l,{className:t.margin,name:"password",type:"password",placeholder:"Password",value:o,onChange:this.handleChange("password")}),r.a.createElement("br",null),r.a.createElement(v.b,{variant:"contained",color:"secondary",type:"submit",className:t.button,disabled:!(l&&o&&c)},a)),r.a.createElement("div",{className:t.margin+" "+t.text},this.props.children))))}}]),t}(r.a.Component)),D=Object(k.withStyles)(function(){return{login:{display:"flex",alignItems:"center",justifyContent:"center"},margin:{margin:20},form:{height:260,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},text:{display:"flex",alignItems:"center"}}})(_),M=a(223),Y=a(569),H=a(568),B=function(e){var t=e.label,a=e.input,n=e.meta,l=n.touched,o=n.invalid,c=n.error,i=Object(M.a)(e,["label","input","meta"]);return r.a.createElement(v.l,Object.assign({label:t,placeholder:t,error:l&&o,helperText:l&&c},a,i))},U=Object(H.a)({form:"formAuthRedux",validate:function(e){var t={};return["email","password"].forEach(function(a){e[a]||(t[a]="Required")}),e.email&&!/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i.test(e.email)&&(t.email="Invalid email address"),e.password&&e.password.length<10&&(t.password="Short password"),t}})(Object(k.withStyles)(function(){return{login:{display:"flex",alignItems:"center",justifyContent:"center"},margin:{margin:20},form:{height:260,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},text:{display:"flex",alignItems:"center"}}})(function(e){var t=e.classes,a=e.formType,n=e.handleSubmit;return console.log(e),r.a.createElement(A,null,r.a.createElement("div",{className:t.login},r.a.createElement(v.j,null,r.a.createElement("form",{onSubmit:n,className:t.form},r.a.createElement("div",null,r.a.createElement(Y.a,{name:"email",component:B,label:"Email",type:"email"})),r.a.createElement("br",null),r.a.createElement("div",null,r.a.createElement(Y.a,{name:"password",component:B,label:"Password",type:"password"})),r.a.createElement("br",null),r.a.createElement(v.b,{variant:"contained",color:"secondary",type:"submit",className:t.button},a)),r.a.createElement("div",{className:t.margin+" "+t.text},e.children))))})),F=function(e){function t(){var e,a;Object(p.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(f.a)(this,(e=Object(b.a)(t)).call.apply(e,[this].concat(r)))).state={open:!1},a.handleOpen=function(){a.setState({open:!0})},a.handleClose=function(){a.setState({open:!1}),a.props.onClose()},a.handleRequest=function(e){var t=e.email;localStorage.setItem("email",t),a.props.onSubmit(e)},a}return Object(g.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this.props,t=e.isAuthenticated,a=e.err;return t?r.a.createElement(d.a,{exact:!0,to:"/"}):a?r.a.createElement(A,null,r.a.createElement(v.g,{open:!0,onClose:this.handleClose,"aria-labelledby":"simple-dialog-title"},r.a.createElement(v.h,{id:"simple-dialog-title"},a))):r.a.createElement(U,{formType:"Login",handleSubmit:this.handleRequest},r.a.createElement(v.m,{align:"center"}," Have no account?"),r.a.createElement(c.b,{to:"/sign-up"},r.a.createElement(v.b,{variant:"text",color:"secondary"},"Sign Up ")))}}]),t}(r.a.Component),R=Object(i.b)(function(e){return{isAuthenticated:!!localStorage.getItem("token"),err:e.auth.err}},function(e){return{onSubmit:function(t){return e(function(e){return function(t){S.a.post("".concat(j,"/signIn"),e).then(function(e){var a=e.data,n=a.token,r=a._id;localStorage.setItem("token",n),localStorage.setItem("userId",r),t(x(n))}).catch(function(e){t(w(e.message))})}}(t))},onClose:function(){return e(w(null))}}})(F),P=a(102),G=a.n(P),z=a(104),q=a.n(z),Z=a(103),K=a.n(Z),V=a(105),W=a.n(V),$=a(47),J=a.n($),Q=(a(552),function(e){function t(){var e,a;Object(p.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(f.a)(this,(e=Object(b.a)(t)).call.apply(e,[this].concat(r)))).clickHandler=function(){var e=a.props,t=e.roomNumber,n=e.hall._id;localStorage.setItem("currentRoom",t),localStorage.setItem("currentHallId",n)},a}return Object(g.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this.props.hall,t=e.title,a=e.description,n=e.imageURL,l=e._id;return r.a.createElement("div",{className:"room-listitem"},r.a.createElement(G.a,{className:"card"},r.a.createElement(c.b,{to:"/hall/".concat(l)},r.a.createElement(q.a,{onClick:this.clickHandler},r.a.createElement(W.a,{className:"media",image:n,title:t}),r.a.createElement(K.a,null,r.a.createElement(J.a,{gutterBottom:!0,variant:"h5",component:"h2"},t),r.a.createElement(J.a,{component:"p"},a))))))}}]),t}(r.a.Component)),X=(a(555),{headers:{Authorization:localStorage.getItem("token")}}),ee=function(){return{type:"LOAD_HALLS_INIT"}},te=function(e){return{type:"LOAD_HALLSLOAD_HALLS_SUCCES",halls:e}},ae=function(e){return{type:"LOAD_HALLSLOAD_HALLS_FAIL",err:e}},ne=(a(556),function(){return r.a.createElement("div",{className:"Loader"},"Loading...")}),re="https://web-ninjas.net/tickets",le={headers:{Authorization:localStorage.getItem("token")}},oe=function(){return function(e){e(ce()),S.a.get("".concat(re)).then(function(t){var a=t.data;e(ie(a))}).catch(function(t){e(se(t.message))})}},ce=function(){return{type:"GET_TICKETS_INIT"}},ie=function(e){return{type:"GET_TICKETS_SUCCESS",tickets:e}},se=function(e){return{type:"GET_TICKETS_FAIL",err:e}},ue=function(e){function t(){var e,a;Object(p.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(f.a)(this,(e=Object(b.a)(t)).call.apply(e,[this].concat(r)))).state={open:!0},a.handleOpen=function(){a.setState({open:!0})},a.handleClose=function(){a.setState({open:!1})},a}return Object(g.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){this.props.loadHalls(),this.props.loadTickets()}},{key:"render",value:function(){var e=this.props,t=e.halls,a=e.err;return e.isLoading?r.a.createElement(A,null,r.a.createElement(ne,null)):a?r.a.createElement(A,null,r.a.createElement(v.g,{open:this.state.open,onClose:this.handleClose,"aria-labelledby":"simple-dialog-title"},r.a.createElement(v.h,{id:"simple-dialog-title"},a))):r.a.createElement(A,null,r.a.createElement("div",{className:"dashboard"},t.map(function(e,t){return r.a.createElement(Q,{hall:e,key:e._id,roomNumber:t})})))}}]),t}(r.a.Component),me=Object(i.b)(function(e){return{halls:e.halls.halls,err:e.halls.err,isLoading:e.halls.isLoading}},function(e){return{loadHalls:function(){return e(function(e){e(ee()),S.a.get("https://web-ninjas.net/halls",X).then(function(t){var a=t.data.halls;e(te(a))}).catch(function(t){e(ae(t.message))})})},loadTickets:function(){return e(oe())}}})(ue),de=function(e){function t(){var e,a;Object(p.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(f.a)(this,(e=Object(b.a)(t)).call.apply(e,[this].concat(r)))).state={open:!1},a.handleOpen=function(){a.setState({open:!0})},a.handleClose=function(){a.setState({open:!1}),a.props.onClose()},a.handleRequest=function(e){a.props.onSubmit(e),console.log(e)},a}return Object(g.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this.props,t=e.isSignedUp,a=e.err;return t?r.a.createElement(A,null,r.a.createElement("div",{className:"flexbox col align-center justify-center"},r.a.createElement(v.m,{align:"center",variant:"h3"},"Account created please "),r.a.createElement("br",null),r.a.createElement(c.b,{to:"/sign-in"},r.a.createElement(v.b,{variant:"text",color:"secondary"},r.a.createElement(v.m,{align:"center",variant:"h3"},"Login"))))):a?(console.log(a),r.a.createElement(A,null,r.a.createElement(v.g,{open:!0,onClose:this.handleClose,"aria-labelledby":"simple-dialog-title"},r.a.createElement(v.h,{id:"simple-dialog-title"},a)))):r.a.createElement(D,{userRequest:this.handleRequest,formType:"Sign Up"},r.a.createElement(v.m,{align:"center"}," Have an account? "),r.a.createElement(c.b,{to:"/sign-in"},r.a.createElement(v.b,{variant:"text",color:"secondary"},"Login")))}}]),t}(r.a.Component),pe=Object(i.b)(function(e){return{isSignedUp:null!==e.auth.userId,err:e.auth.err}},function(e){return{onSubmit:function(t){var a=t.email,n=t.password;return e(function(e,t){return function(a){var n={email:e,password:t};S.a.post("".concat(j,"/signUp"),n).then(function(e){var t=e.data,n=t.id,r=t.email;localStorage.setItem("email",r),a(I(n,r))}).catch(function(e){console.log(e.response),a(w(e.message))})}}(a,n))},onClose:function(){return e(w(null))}}})(de),he=a(29),fe=a(18),be=a.n(fe),ge=(a(557),a(558),a(559),a(108)),Ee=a.n(ge),ve=function(e){function t(){var e,a;Object(p.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(f.a)(this,(e=Object(b.a)(t)).call.apply(e,[this].concat(r)))).state={date:"".concat(a.props.date),start:"".concat(a.props.hours,":00"),end:"".concat(a.props.hours+1,":00"),title:"",open:!1},a.onChange=function(e){var t=e.target,n=t.name,r=t.value,l=a.state.date;"start"===n&&a.setState({end:be()("".concat(l,"T").concat(r,":00")).add(1,"hours").format("HH:00")}),a.setState(Object(E.a)({},n,r))},a.onAdd=function(){var e=a.state,t=e.date,n=e.start,r=e.end,l=e.title;a.props.postTicket({hall_id:localStorage.getItem("currentHallId"),user_id:localStorage.getItem("userId"),from:new Date(t+"T"+n).getTime()+1,to:new Date(t+"T"+r).getTime()-1,title:l})},a}return Object(g.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this.props.classes,t=this.state,a=t.date,n=t.title,l=t.start,o=t.end,i=!!localStorage.getItem("token");return r.a.createElement("div",{className:"flexbox col pd-20"},r.a.createElement(v.l,{id:"title",placeholder:"Your event",required:!0,label:"Title",type:"text",name:"title",value:n,className:e.textField,InputLabelProps:{shrink:!0},onChange:this.onChange}),r.a.createElement(v.l,{id:"date",label:"Book room for date",type:"date",name:"date",value:a,className:e.textField,inputProps:{min:be()().format("YYYY-MM-DD")},InputLabelProps:{shrink:!0},onChange:this.onChange}),r.a.createElement(v.l,{id:"time",label:"Start event",type:"time",name:"start",value:l,className:e.textField,InputLabelProps:{shrink:!0},inputProps:{min:"10:00",max:"18:00",step:"1"},onChange:this.onChange}),r.a.createElement(v.l,{id:"time",label:"End event",type:"time",name:"end",value:o,className:"".concat(e.textField," ").concat(e.marginBottom),InputLabelProps:{shrink:!0},inputProps:{min:l,max:"18:00",step:"1"},onChange:this.onChange}),i?r.a.createElement(v.b,{color:"secondary",disabled:0===n.length,onClick:this.onAdd,"aria-label":"Done"},r.a.createElement(Ee.a,null)):r.a.createElement(c.b,{to:"/sign-in"},r.a.createElement(v.b,{variant:"text",color:"secondary"},"Sign in to book")))}}]),t}(n.Component),ke=Object(i.b)(function(e){return{tickets:e.tickets.tickets}},function(e){return{postTicket:function(t){return e((a=t,function(e){e(ce());var t=a.from,n=a.to;(new Date).getTime()>t?e(se("This time is already past")):t>n?e(se("End must be later then start")):S.a.post(re,a,le).then(function(){e(oe())}).catch(function(t){e(se(t.message))})}));var a}}})(Object(k.withStyles)(function(e){return{root:{flexGrow:1,width:"100%"},margin:{margin:e.spacing.unit},marginBottom:{marginBottom:20},container:{color:"red"},textField:{color:"red"}}})(ve)),ye=a(225),Oe=a.n(ye),Ce=a(226),Se=a.n(Ce),je=function(e){function t(){var e,a;Object(p.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(f.a)(this,(e=Object(b.a)(t)).call.apply(e,[this].concat(r)))).state={date:a.props.date,start:"".concat(a.props.hours,":00"),end:"".concat(a.props.hours+1,":00"),title:"",expanded:!1},a.onChange=function(e){var t=e.target,n=t.name,r=t.value,l=a.state.date;"start"===n&&a.setState({end:be()("".concat(l,"T").concat(r,":00")).add(1,"hours").format("HH:00")}),a.setState(Object(E.a)({},n,r)),sessionStorage.setItem([n],r)},a.onCorrect=function(e){var t=a.props,n=t.correctTicket,r=t.hallId,l=t.isMineBooking,o=a.state,c=o.date,i=o.start,s=o.end;n({hall_id:r,user_id:localStorage.getItem("userId"),from:new Date("".concat(c,"T").concat(i)).getTime()+1,to:new Date("".concat(c,"T").concat(s)).getTime()-1},l._id)},a.onDelete=function(e){var t=a.props;(0,t.deleteTicket)(t.isMineBooking._id)},a.handleExpandClick=function(){a.setState(function(e){return{expanded:!e.expanded}})},a}return Object(g.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,a=e.isMineBooking,n=e.isBookedTime,l=this.state,o=l.title,c=l.start,i=l.end,s=l.date,u=!!localStorage.getItem("token");return r.a.createElement(v.c,{className:t.card},r.a.createElement(v.e,{avatar:r.a.createElement(v.a,{"aria-label":"Info",className:t.avatar},"I"),title:"About ticket"}),r.a.createElement(v.d,null,r.a.createElement(v.m,{component:"p",variant:"subtitle1"},"Title: ",n.title),r.a.createElement(v.m,{component:"p",variant:"subtitle1"},"From: ",be()(n.from).format("DD-MM-YYYY HH:mm")),r.a.createElement(v.m,{component:"p",variant:"subtitle1"},"To: ",be()(n.to).format("DD-MM-YYYY HH:mm")),r.a.createElement(v.i,{className:t.expand,onClick:this.handleExpandClick,"aria-expanded":this.state.expanded,disabled:!(u&&a),color:"secondary","aria-label":"Correct ticket"},r.a.createElement(Oe.a,null)),r.a.createElement(v.i,{color:"secondary",onClick:this.onDelete,disabled:!(u&&a),"aria-label":"Correct ticket"},r.a.createElement(Se.a,null))),r.a.createElement(v.f,{in:this.state.expanded,timeout:"auto",unmountOnExit:!0},r.a.createElement(v.d,null,r.a.createElement("div",{className:"flexbox col"},r.a.createElement(v.l,{required:!0,placeholder:"Your event",id:"title",label:"Title",type:"text",name:"title",value:o,className:t.textField,InputLabelProps:{shrink:!0},onChange:this.onChange}),r.a.createElement(v.l,{id:"date",label:"Book room for new date",type:"date",name:"date",value:s,className:t.textField,inputProps:{min:be()().format("YYYY-MM-DD")},InputLabelProps:{shrink:!0},onChange:this.onChange}),r.a.createElement(v.l,{id:"time",label:"Start event",type:"time",name:"start",value:c,className:t.textField,InputLabelProps:{shrink:!0},inputProps:{min:"10:00",max:"18:00",step:"1"},onChange:this.onChange}),r.a.createElement(v.l,{id:"time",label:"End event",type:"time",name:"end",value:i,className:"".concat(t.textField," ").concat(t.marginBottom),InputLabelProps:{shrink:!0},inputProps:{min:c,max:"18:00",step:"1"},onChange:this.onChange}),r.a.createElement(v.b,{color:"secondary",disabled:0===o.length,"aria-label":"Correct ticket",onClick:this.onCorrect},r.a.createElement(Ee.a,null))))))}}]),t}(n.Component),Ie=Object(i.b)(function(e){return{tickets:e.tickets.tickets}},function(e){return{correctTicket:function(t,a){return e(function(e,t){return function(a){a(ce());var n=e.from,r=e.to;(new Date).getTime()>n?a(se("This time is already past")):n>r?a(se("End must be later then start")):S.a.put("".concat("https://web-ninjas.net/ticket","/").concat(t),{from:n,to:r,title:"event"},le).then(function(){a(oe())}).catch(function(e){a(se(e.message))})}}(t,a))},deleteTicket:function(t){return e(function(e){return function(t){S.a.delete("".concat(re,"/").concat(e),le).then(function(e){t(oe())}).catch(function(e){t(se(e.message))})}}(t))}}})(Object(k.withStyles)(function(e){return{root:{flexGrow:1,width:"100%"},margin:{margin:e.spacing.unit},marginBottom:{marginBottom:20},container:{color:"red"},textField:{color:"red"},avatar:{backgroundColor:"#C51161"}}})(je)),xe=function(e){function t(){var e,a;Object(p.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(f.a)(this,(e=Object(b.a)(t)).call.apply(e,[this].concat(r)))).state={open:!1},a.handleOpen=function(){a.setState({open:!0})},a.handleClose=function(){a.setState({open:!1})},a}return Object(g.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this.props,t=e.hours,a=e.currentDate,n=e.tickets,l=e.hallId,o=a.date,c=localStorage.getItem("userId"),i=n.filter(function(e){return e.hall_id===l}),s=i.filter(function(e){return e.user_id===c}),u=i.find(function(e){return be()(o+"T"+t+":01").isBetween(e.from,e.to,"millisecond")}),m=s.find(function(e){return be()(o+"T"+t+":01").isBetween(e.from,e.to,"millisecond")});return r.a.createElement("div",{className:"cell"},r.a.createElement("div",{className:"hours"},t,":00- ",t+1,":00"),r.a.createElement("div",{className:"mark ".concat(u?"booked":"free"," "),onClick:this.handleOpen},m&&r.a.createElement(v.m,null,"*")),r.a.createElement(v.g,{open:this.state.open,onClose:this.handleClose},u?r.a.createElement(Ie,{date:o,hours:t,isMineBooking:m,isBookedTime:u}):r.a.createElement(ke,{date:o,hours:t})))}}]),t}(r.a.Component),we=function(e){return r.a.createElement("div",{className:"day-scedule-wrapper"},r.a.createElement("div",{className:"day-scedule mb-20"},new Array(8).fill(null).map(function(t,a){return r.a.createElement(xe,Object.assign({hours:10+a},e,{key:a}))})),r.a.createElement("div",{className:"flexbox align-center mb-20"},r.a.createElement("span",{className:"marker marker-free mr-20"}),r.a.createElement(v.m,{variant:"subtitle1"}," - is free")),r.a.createElement("div",{className:"flexbox align-center mb-20 "},r.a.createElement("span",{className:"marker marker-book mr-20"}),r.a.createElement(v.m,{variant:"subtitle1"}," - is booked")),r.a.createElement("div",{className:"flexbox align-center mb-20 "},r.a.createElement("span",{className:"mr-20"},"*"),r.a.createElement(v.m,{variant:"subtitle1"}," - your booking")))},Ne=a(227),Le=a.n(Ne),Te=a(228),Ae=a.n(Te),_e=(a(560),a(561),function(e){function t(){var e,a;Object(p.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(f.a)(this,(e=Object(b.a)(t)).call.apply(e,[this].concat(r)))).state={},a}return Object(g.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this.props,t=e.tickets,a=e.currentDay,n=localStorage.getItem("currentHallId"),l=t.filter(function(e){return e.hall_id===n});return r.a.createElement("div",{className:"preview"},new Array(8).fill(null).map(function(e,t){var n=l.some(function(e){return be()("".concat(be()(a).format("YYYY-MM-DD"),"T1").concat(t,":01")).isBetween(e.from,e.to,"milliseconds")});return r.a.createElement("span",{key:t,className:"mark ".concat(n&&"booked")})}))}}]),t}(n.Component)),De=Object(i.b)(function(e){return{tickets:e.tickets.tickets}})(_e),Me=function(e){function t(){var e,a;Object(p.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(f.a)(this,(e=Object(b.a)(t)).call.apply(e,[this].concat(r)))).state={currentMonth:be()(),selectedDate:be()()},a.onDateClick=function(e){var t=a.props.onChangeDay;a.setState({selectedDate:e}),t(be()(e).format("YYYY-MM-DD"))},a.nextMonth=function(){var e=a.state.currentMonth;a.setState({currentMonth:e.add(1,"month")})},a.prevMonth=function(){var e=a.state.currentMonth;a.setState({currentMonth:e.subtract(1,"month")})},a}return Object(g.a)(t,e),Object(h.a)(t,[{key:"renderHeader",value:function(){var e=this.state.currentMonth;return r.a.createElement("div",{className:"calendar-header flexbox align-center"},r.a.createElement(v.b,{onClick:this.prevMonth},r.a.createElement(Le.a,null)),r.a.createElement("span",null,be()(e).format("MMMM YYYY")),r.a.createElement(v.b,{onClick:this.nextMonth},r.a.createElement(Ae.a,null)))}},{key:"renderDays",value:function(){for(var e=[],t=be()().startOf("week"),a=0;a<7;a++)e.push(r.a.createElement("div",{className:"cell",key:a},t.add(1,"day").format("ddd")));return r.a.createElement("div",{className:"days flexbox"},e)}},{key:"renderCells",value:function(){for(var e=this,t=this.state,a=t.currentMonth,n=t.selectedDate,l=a.clone().startOf("month"),o=a.clone().endOf("month"),c=l.clone().startOf("isoWeek"),i=o.clone().endOf("isoWeek"),s=[],u=[],m=c,d="";m<=i;){for(var p=function(t){d=be()(m).format("DD");var l=be()(m),o=m;u.push(r.a.createElement("div",{className:"day ".concat(be()(o).isSame(a,"month")?be()(o).isSame(n,"day")?"selected":"":"disabled"),key:m,onClick:function(){return e.onDateClick(l)}},r.a.createElement(v.m,null,d),r.a.createElement(De,{currentDay:l}))),m=m.add(1,"day")},h=0;h<7;h++)p();s.push(r.a.createElement("div",{className:"week",key:m},u)),u=[]}return r.a.createElement("div",{className:"body"},s)}},{key:"render",value:function(){return r.a.createElement("div",{className:"calendar"},this.renderHeader(),this.renderDays(),this.renderCells())}}]),t}(r.a.Component),Ye=function(e){function t(){var e,a;Object(p.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(f.a)(this,(e=Object(b.a)(t)).call.apply(e,[this].concat(r)))).state={date:be()().format("YYYY-MM-DD"),start:"10:00",end:"11:00",open:!1},a.onChangeTime=function(e){var t=e.target,n=t.name,r=t.value,l=a.state.date;"start"===n&&a.setState({end:be()("".concat(l,"T").concat(r,":00")).add(1,"hours").format("HH:00")}),a.setState(Object(E.a)({},n,r)),sessionStorage.setItem([n],r)},a.onChangeDay=function(e){a.setState({date:e})},a}return Object(g.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this,t=this.state.date;return r.a.createElement("div",null,r.a.createElement("form",{className:"roomscedule",noValidate:!0,onSubmit:this.onAdd},r.a.createElement("div",{className:"picker-container"},r.a.createElement(Me,{onChangeDay:function(t){return e.onChangeDay(t)}})),r.a.createElement(v.m,{variant:"h4",align:"center"},"Scedule for ",t),r.a.createElement(v.m,{variant:"subtitle1",align:"center"},"Click cell for more info"),r.a.createElement(we,Object.assign({currentDate:this.state},this.props))))}}]),t}(r.a.Component),He=Object(k.withStyles)(function(e){return{container:{display:"flex",flexWrap:"wrap"},textField:{width:400,marginBottom:20}}})(Ye),Be=function(e){function t(){var e,a;Object(p.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(f.a)(this,(e=Object(b.a)(t)).call.apply(e,[this].concat(r)))).state={open:!0},a.handleOpen=function(){a.setState({open:!0})},a.handleClose=function(){a.setState({open:!1}),a.props.confirmErr(),a.handleOpen()},a}return Object(g.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){this.props.getTickets()}},{key:"render",value:function(){var e=this.props,t=e.classes,a=e.hall,n=e.hallsErr,l=e.tickets,o=e.ticketsErr,c=e.hallsLoading,i=e.ticketsLoading;if(c||i)return r.a.createElement(A,null,r.a.createElement(ne,null));if(n||o){var s=n||o;return r.a.createElement(A,null,r.a.createElement(v.g,{open:this.state.open,onClose:this.handleClose,"aria-labelledby":"simple-dialog-title"},r.a.createElement(v.h,{id:"simple-dialog-title"},s)))}return a?r.a.createElement(A,null,a&&r.a.createElement(v.j,{className:t.root,elevation:1},r.a.createElement(v.m,{variant:"title",component:"h3"},a.title),r.a.createElement(v.a,{alt:a.title,src:a.imageURL,className:t.bigAvatar}),r.a.createElement(v.m,{variant:"subtitle1"},a.description),r.a.createElement(He,{tickets:l,hallId:a._id}))):r.a.createElement(d.a,{exact:!0,to:"/"})}}]),t}(r.a.Component),Ue=Object(i.b)(function(e,t){var a=t.match.params.hall_id;return{hallsErr:e.halls.err,tickets:e.tickets.tickets,ticketsErr:e.tickets.err,hallsLoading:e.halls.isLoading,ticketsLoading:e.tickets.isLoading,hall:e.halls.halls.find(function(e){return e._id===a})}},function(e){return{getTickets:function(){return e(oe())},confirmErr:function(){return e({type:"ERR_CONFIRM"})}}})(Object(k.withStyles)(function(e){return{root:Object(he.a)({},e.mixins.gutters(),{paddingTop:2*e.spacing.unit,paddingBottom:4*e.spacing.unit,margin:20}),bigAvatar:{width:"100%",maxWidth:360,height:260,borderRadius:10,marginTop:2*e.spacing.unit,marginBottom:2*e.spacing.unit}}})(Be)),Fe=a(152),Re=function(e){function t(){var e,a;Object(p.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(f.a)(this,(e=Object(b.a)(t)).call.apply(e,[this].concat(r)))).state={ticketsData:{labels:a.props.halls.map(function(e){return e.title}),datasets:[{label:"Count of tickets",backgroundColor:"rgb(255, 99, 132)",data:a.props.halls.map(function(e){return a.props.tickets.filter(function(t){return t.hall_id===e._id}).length})}]},ticketsOptions:{scales:{yAxes:[{ticks:{beginAtZero:!0,stepSize:1}}]},title:{display:!0,text:"Count of tickets",fontSize:20,fontColor:"#333"}},usersData:{labels:a.props.halls.map(function(e){return e.title}),datasets:[{label:"Count of users",backgroundColor:"rgb(255, 99, 132)",data:a.props.halls.map(function(e){return new Set(a.props.tickets.filter(function(t){return t.hall_id===e._id}).map(function(e){return e.user_id})).size})}]},usersOptions:{scales:{yAxes:[{ticks:{beginAtZero:!0,stepSize:1}}]},title:{display:!0,text:"Count of users",fontSize:20,fontColor:"#333"}},timeData:{labels:a.props.halls.map(function(e){return e.title}),datasets:[{label:"Count of time",backgroundColor:"rgb(255, 99, 132)",data:a.props.halls.map(function(e){return a.props.tickets.filter(function(t){return t.hall_id===e._id}).length})}]},timeOptions:{scales:{yAxes:[{ticks:{beginAtZero:!0,stepSize:1}}]},title:{display:!0,text:"Count of time",fontSize:20,fontColor:"#333"}}},a}return Object(g.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this.state,t=e.ticketsData,a=e.ticketsOptions,n=e.usersData,l=e.usersOptions;return 0===this.props.halls.length?r.a.createElement(d.a,{exact:!0,to:"/"}):r.a.createElement(A,null,r.a.createElement("div",{className:"flexbox col"},r.a.createElement("div",null,r.a.createElement(Fe.a,{data:t,options:a,height:300})),r.a.createElement("div",null,r.a.createElement(Fe.a,{data:n,options:l,height:300}))))}}]),t}(r.a.Component),Pe=Object(i.b)(function(e){return console.log(e),{tickets:e.tickets.tickets,halls:e.halls.halls}})(Re);var Ge=function(){var e=r.a.createElement(d.d,null,r.a.createElement(d.b,{exact:!0,path:"/",component:me}),r.a.createElement(d.b,{path:"/sign-up",component:pe}),r.a.createElement(d.b,{path:"/sign-in",component:R}),r.a.createElement(d.b,{path:"/hall/:hall_id",component:Ue}),r.a.createElement(d.b,{path:"/statistics",component:Pe}));return r.a.createElement("div",null,e)};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var ze={email:null,token:null,userId:null,err:null,loading:!1},qe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ze,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SIGNUP_SUCCESS":return Object(he.a)({},e,{email:t.email,userId:t.userId,loading:!1});case"SIGNIN_SUCCESS":return Object(he.a)({},e,{token:t.token,email:t.email,loading:!1});case"AUTH_FAIL":return Object(he.a)({},e,{err:t.err,loading:!1});case"LOGOUT":return Object(he.a)({},e,{token:null,userId:null});default:return e}},Ze={halls:[],err:null,isLoading:!1},Ke=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ze,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOAD_HALLS_INIT":return Object(he.a)({},e,{isLoading:!0});case"LOAD_HALLSLOAD_HALLS_SUCCES":return Object(he.a)({},e,{halls:t.halls,isLoading:!1});case"LOAD_HALLSLOAD_HALLS_FAIL":return Object(he.a)({},e,{err:t.err,isLoading:!1});case"ERR_CONFIRM":return Object(he.a)({},e,{err:null});default:return e}},Ve={tickets:[],err:null,isLoading:!1},We=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ve,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_TICKETS_INIT":return Object(he.a)({},e,{isLoading:!0});case"GET_TICKETS_SUCCESS":return Object(he.a)({},e,{tickets:t.tickets,isLoading:!1});case"GET_TICKETS_FAIL":return Object(he.a)({},e,{err:t.err,isLoading:!1});case"ERR_CONFIRM":return Object(he.a)({},e,{err:null});default:return e}},$e=Object(s.c)({auth:qe,halls:Ke,tickets:We,form:m.a}),Je=s.d,Qe=Object(s.e)($e,Je(Object(s.a)(u.a))),Xe=r.a.createElement(i.a,{store:Qe},r.a.createElement(c.a,{basename:"/booking_test"},r.a.createElement(Ge,null)));o.a.render(Xe,document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[299,1,2]]]);
//# sourceMappingURL=main.5f8ef68e.chunk.js.map