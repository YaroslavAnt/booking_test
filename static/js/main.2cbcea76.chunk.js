(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{131:function(e,t,a){},265:function(e,t,a){e.exports=a(526)},274:function(e,t,a){},275:function(e,t,a){},276:function(e,t,a){},277:function(e,t,a){},425:function(e,t,a){},426:function(e,t,a){},429:function(e,t,a){},430:function(e,t,a){},431:function(e,t,a){},432:function(e,t,a){},433:function(e,t,a){},434:function(e,t,a){},435:function(e,t,a){},526:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(26),o=a.n(l),c=a(22),i=a(24),s=a(43),u=a(189),m=(a(274),a(42)),d=(a(275),a(131),a(10)),h=a(11),p=a(14),f=a(12),g=a(13),b=a(33),E=a(3),v=a(36),k=(a(276),a(191)),O=a.n(k),y=(a(277),a(34)),C=a.n(y),S="https://web-ninjas.net",j=function(e,t){return{type:"SIGNUP_SUCCESS",email:t,userId:e}},I=function(e){return{type:"SIGNIN_SUCCESS",token:e}},w=function(e){return{type:"AUTH_FAIL",err:e}},x=function(e){function t(){var e,a;Object(d.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(p.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(r)))).state={open:!1},a.handleClose=function(){a.setState({open:!1})},a.handleOpen=function(){a.setState({open:!0})},a}return Object(g.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=localStorage.getItem("token"),t=localStorage.getItem("email"),a=this.props.classes,n=r.a.createElement("div",null,r.a.createElement(c.b,{to:"/sign-in"},r.a.createElement(E.b,{variant:"contained",color:"secondary",className:a.margin},"Sign In")),r.a.createElement(c.b,{to:"/sign-up"},r.a.createElement(E.b,{variant:"contained",color:"secondary",className:a.margin},"Sign Up")));return e&&(n=r.a.createElement("div",null,r.a.createElement("div",{className:"controll"},r.a.createElement(E.b,{onClick:this.handleOpen},e&&r.a.createElement(E.m,{color:"secondary"},t),r.a.createElement(O.a,{color:"secondary"}))),r.a.createElement(E.k,{anchorOrigin:{vertical:"top",horizontal:"center"},open:this.state.open,onClose:this.handleClose,message:r.a.createElement(c.b,{to:"/"},r.a.createElement(E.b,{onClick:this.props.onLogOut,variant:"contained",color:"secondary"},"LogOut"))}))),r.a.createElement("div",{className:"header"},r.a.createElement(c.c,{exact:!0,to:"/"},r.a.createElement(E.m,{variant:"h1"},"BOOKING-TEST")),n)}}]),t}(r.a.Component),L=Object(i.b)(function(e){return{token:e.auth.token}},function(e){return{onLogOut:function(){return e((localStorage.clear(),sessionStorage.clear(),{type:"LOGOUT"}))}}})(Object(v.withStyles)(function(e){return{margin:{margin:e.spacing.unit}}})(x)),N=Object(v.withStyles)(function(e){return{footer:{display:"flex",justifyContent:"space-between",alignItems:"center",backgroundColor:"#111",padding:20}}})(function(e){var t=e.classes;return r.a.createElement("div",{className:t.footer},r.a.createElement(c.b,{to:"/statistics"},r.a.createElement(E.b,{variant:"contained",color:"secondary"},"Get Statistics")),r.a.createElement(E.m,{align:"right",color:"secondary"}," Made by Yaroslav Antonchyk "))}),T=function(e){return r.a.createElement("div",{className:"page"},r.a.createElement(L,null),r.a.createElement("div",{className:"page-content"},e.children),r.a.createElement(N,null))},A=(a(425),function(e){function t(){var e,a;Object(d.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(p.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(r)))).state={email:"",password:"",isVaild:!0},a.handleChange=function(e){return function(t){a.checkValid(),a.setState(Object(b.a)({},e,t.target.value))}},a.checkValid=function(){var e=a.state.email;a.setState({isVaild:/^[a-zA-Z0-9.!#$%&\u2019*+\/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/.test(e)})},a.handleSubmit=function(e){e.preventDefault(),a.props.userRequest(a.state),a.setState({email:"",password:""})},a}return Object(g.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,a=e.formType,n=this.state,l=n.email,o=n.password,c=n.isVaild;return r.a.createElement(T,null,r.a.createElement("div",{className:t.login},r.a.createElement(E.j,null,r.a.createElement("form",{onSubmit:this.handleSubmit,className:t.form},r.a.createElement(E.l,{error:!c,className:t.margin,name:"email",placeholder:"Email",value:l,onChange:this.handleChange("email")}),r.a.createElement("br",null),r.a.createElement(E.l,{className:t.margin,name:"password",type:"password",placeholder:"Password",value:o,onChange:this.handleChange("password")}),r.a.createElement("br",null),r.a.createElement(E.b,{variant:"contained",color:"secondary",type:"submit",className:t.button,disabled:!(l&&o&&c)},a)),r.a.createElement("div",{className:t.margin+" "+t.text},this.props.children))))}}]),t}(r.a.Component)),_=Object(v.withStyles)(function(){return{login:{display:"flex",alignItems:"center",justifyContent:"center"},margin:{margin:20},form:{height:260,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},text:{display:"flex",alignItems:"center"}}})(A),D=function(e){function t(){var e,a;Object(d.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(p.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(r)))).state={open:!1},a.handleOpen=function(){a.setState({open:!0})},a.handleClose=function(){a.setState({open:!1}),a.props.onClose()},a.handleRequest=function(e){var t=e.email;localStorage.setItem("email",t),a.props.onSubmit(e)},a}return Object(g.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this.props,t=e.isAuthenticated,a=e.err;return t?r.a.createElement(m.a,{exact:!0,to:"/"}):a?r.a.createElement(T,null,r.a.createElement(E.g,{open:!0,onClose:this.handleClose,"aria-labelledby":"simple-dialog-title"},r.a.createElement(E.h,{id:"simple-dialog-title"},a))):r.a.createElement(_,{userRequest:this.handleRequest,formType:"Login"},r.a.createElement(E.m,{align:"center"}," Have no account?"),r.a.createElement(c.b,{to:"/sign-up"},r.a.createElement(E.b,{variant:"text",color:"secondary"},"Sign Up ")))}}]),t}(r.a.Component),M=Object(i.b)(function(e){return{isAuthenticated:!!localStorage.getItem("token"),err:e.auth.err}},function(e){return{onSubmit:function(t){return e(function(e){return function(t){C.a.post("".concat(S,"/signIn"),e).then(function(e){var a=e.data,n=a.token,r=a._id;localStorage.setItem("token",n),localStorage.setItem("userId",r),t(I(n))}).catch(function(e){t(w(e.message))})}}(t))},onClose:function(){return e(w(null))}}})(D),Y=a(84),H=a.n(Y),B=a(86),U=a.n(B),F=a(85),R=a.n(F),P=a(87),G=a.n(P),z=a(39),q=a.n(z),K=(a(426),function(e){function t(){var e,a;Object(d.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(p.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(r)))).clickHandler=function(){var e=a.props,t=e.roomNumber,n=e.hall._id;localStorage.setItem("currentRoom",t),localStorage.setItem("currentHallId",n)},a}return Object(g.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this.props.hall,t=e.title,a=e.description,n=e.imageURL,l=e._id;return r.a.createElement("div",{className:"room-listitem"},r.a.createElement(H.a,{className:"card"},r.a.createElement(c.b,{to:"/hall/".concat(l)},r.a.createElement(U.a,{onClick:this.clickHandler},r.a.createElement(G.a,{className:"media",image:n,title:t}),r.a.createElement(R.a,null,r.a.createElement(q.a,{gutterBottom:!0,variant:"h5",component:"h2"},t),r.a.createElement(q.a,{component:"p"},a))))))}}]),t}(r.a.Component)),V=(a(429),{headers:{Authorization:localStorage.getItem("token")}}),W=function(){return{type:"LOAD_HALLS_INIT"}},Z=function(e){return{type:"LOAD_HALLSLOAD_HALLS_SUCCES",halls:e}},$=function(e){return{type:"LOAD_HALLSLOAD_HALLS_FAIL",err:e}},J=(a(430),function(){return r.a.createElement("div",{className:"Loader"},"Loading...")}),Q="https://web-ninjas.net/tickets",X={headers:{Authorization:localStorage.getItem("token")}},ee=function(){return function(e){e(te()),C.a.get("".concat(Q)).then(function(t){var a=t.data;e(ae(a))}).catch(function(t){e(ne(t.message))})}},te=function(){return{type:"GET_TICKETS_INIT"}},ae=function(e){return{type:"GET_TICKETS_SUCCESS",tickets:e}},ne=function(e){return{type:"GET_TICKETS_FAIL",err:e}},re=function(e){function t(){var e,a;Object(d.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(p.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(r)))).state={open:!0},a.handleOpen=function(){a.setState({open:!0})},a.handleClose=function(){a.setState({open:!1})},a}return Object(g.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){this.props.loadHalls(),this.props.loadTickets()}},{key:"render",value:function(){var e=this.props,t=e.halls,a=e.err;return e.isLoading?r.a.createElement(T,null,r.a.createElement(J,null)):a?r.a.createElement(T,null,r.a.createElement(E.g,{open:this.state.open,onClose:this.handleClose,"aria-labelledby":"simple-dialog-title"},r.a.createElement(E.h,{id:"simple-dialog-title"},a))):r.a.createElement(T,null,r.a.createElement("div",{className:"dashboard"},t.map(function(e,t){return r.a.createElement(K,{hall:e,key:e._id,roomNumber:t})})))}}]),t}(r.a.Component),le=Object(i.b)(function(e){return{halls:e.halls.halls,err:e.halls.err,isLoading:e.halls.isLoading}},function(e){return{loadHalls:function(){return e(function(e){e(W()),C.a.get("https://web-ninjas.net/halls",V).then(function(t){var a=t.data.halls;e(Z(a))}).catch(function(t){e($(t.message))})})},loadTickets:function(){return e(ee())}}})(re),oe=function(e){function t(){var e,a;Object(d.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(p.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(r)))).state={open:!1},a.handleOpen=function(){a.setState({open:!0})},a.handleClose=function(){a.setState({open:!1}),a.props.onClose()},a.handleRequest=function(e){a.props.onSubmit(e),console.log(e)},a}return Object(g.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this.props,t=e.isSignedUp,a=e.err;return t?r.a.createElement(T,null,r.a.createElement("div",{className:"flexbox col align-center justify-center"},r.a.createElement(E.m,{align:"center",variant:"h3"},"Account created please "),r.a.createElement("br",null),r.a.createElement(c.b,{to:"/sign-in"},r.a.createElement(E.b,{variant:"text",color:"secondary"},r.a.createElement(E.m,{align:"center",variant:"h3"},"Login"))))):a?(console.log(a),r.a.createElement(T,null,r.a.createElement(E.g,{open:!0,onClose:this.handleClose,"aria-labelledby":"simple-dialog-title"},r.a.createElement(E.h,{id:"simple-dialog-title"},a)))):r.a.createElement(_,{userRequest:this.handleRequest,formType:"Sign Up"},r.a.createElement(E.m,{align:"center"}," Have an account? "),r.a.createElement(c.b,{to:"/sign-in"},r.a.createElement(E.b,{variant:"text",color:"secondary"},"Login")))}}]),t}(r.a.Component),ce=Object(i.b)(function(e){return{isSignedUp:null!==e.auth.userId,err:e.auth.err}},function(e){return{onSubmit:function(t){var a=t.email,n=t.password;return e(function(e,t){return function(a){var n={email:e,password:t};C.a.post("".concat(S,"/signUp"),n).then(function(e){var t=e.data,n=t.id,r=t.email;localStorage.setItem("email",r),a(j(n,r))}).catch(function(e){console.log(e.response),a(w(e.message))})}}(a,n))},onClose:function(){return e(w(null))}}})(oe),ie=a(25),se=a(15),ue=a.n(se),me=(a(431),a(432),a(433),a(90)),de=a.n(me),he=function(e){function t(){var e,a;Object(d.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(p.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(r)))).state={date:"".concat(a.props.date),start:"".concat(a.props.hours,":00"),end:"".concat(a.props.hours+1,":00"),title:"",open:!1},a.onChange=function(e){var t=e.target,n=t.name,r=t.value,l=a.state.date;"start"===n&&a.setState({end:ue()("".concat(l,"T").concat(r,":00")).add(1,"hours").format("HH:00")}),a.setState(Object(b.a)({},n,r))},a.onAdd=function(){var e=a.state,t=e.date,n=e.start,r=e.end,l=e.title;a.props.postTicket({hall_id:localStorage.getItem("currentHallId"),user_id:localStorage.getItem("userId"),from:new Date(t+"T"+n).getTime()+1,to:new Date(t+"T"+r).getTime()-1,title:l})},a}return Object(g.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this.props.classes,t=this.state,a=t.date,n=t.title,l=t.start,o=t.end,i=!!localStorage.getItem("token");return r.a.createElement("div",{className:"flexbox col pd-20"},r.a.createElement(E.l,{id:"title",placeholder:"Your event",required:!0,label:"Title",type:"text",name:"title",value:n,className:e.textField,InputLabelProps:{shrink:!0},onChange:this.onChange}),r.a.createElement(E.l,{id:"date",label:"Book room for date",type:"date",name:"date",value:a,className:e.textField,inputProps:{min:ue()().format("YYYY-MM-DD")},InputLabelProps:{shrink:!0},onChange:this.onChange}),r.a.createElement(E.l,{id:"time",label:"Start event",type:"time",name:"start",value:l,className:e.textField,InputLabelProps:{shrink:!0},inputProps:{min:"10:00",max:"18:00",step:"1"},onChange:this.onChange}),r.a.createElement(E.l,{id:"time",label:"End event",type:"time",name:"end",value:o,className:"".concat(e.textField," ").concat(e.marginBottom),InputLabelProps:{shrink:!0},inputProps:{min:l,max:"18:00",step:"1"},onChange:this.onChange}),i?r.a.createElement(E.b,{color:"secondary",disabled:0===n.length,onClick:this.onAdd,"aria-label":"Done"},r.a.createElement(de.a,null)):r.a.createElement(c.b,{to:"/sign-in"},r.a.createElement(E.b,{variant:"text",color:"secondary"},"Sign in to book")))}}]),t}(n.Component),pe=Object(i.b)(function(e){return{tickets:e.tickets.tickets}},function(e){return{postTicket:function(t){return e((a=t,function(e){e(te());var t=a.from,n=a.to;(new Date).getTime()>t?e(ne("This time is already past")):t>n?e(ne("End must be later then start")):C.a.post(Q,a,X).then(function(){e(ee())}).catch(function(t){e(ne(t.message))})}));var a}}})(Object(v.withStyles)(function(e){return{root:{flexGrow:1,width:"100%"},margin:{margin:e.spacing.unit},marginBottom:{marginBottom:20},container:{color:"red"},textField:{color:"red"}}})(he)),fe=a(192),ge=a.n(fe),be=a(193),Ee=a.n(be),ve=function(e){function t(){var e,a;Object(d.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(p.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(r)))).state={date:a.props.date,start:"".concat(a.props.hours,":00"),end:"".concat(a.props.hours+1,":00"),title:"",expanded:!1},a.onChange=function(e){var t=e.target,n=t.name,r=t.value,l=a.state.date;"start"===n&&a.setState({end:ue()("".concat(l,"T").concat(r,":00")).add(1,"hours").format("HH:00")}),a.setState(Object(b.a)({},n,r)),sessionStorage.setItem([n],r)},a.onCorrect=function(e){var t=a.props,n=t.correctTicket,r=t.hallId,l=t.isMineBooking,o=a.state,c=o.date,i=o.start,s=o.end;n({hall_id:r,user_id:localStorage.getItem("userId"),from:new Date("".concat(c,"T").concat(i)).getTime()+1,to:new Date("".concat(c,"T").concat(s)).getTime()-1},l._id)},a.onDelete=function(e){var t=a.props;(0,t.deleteTicket)(t.isMineBooking._id)},a.handleExpandClick=function(){a.setState(function(e){return{expanded:!e.expanded}})},a}return Object(g.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,a=e.isMineBooking,n=e.isBookedTime,l=this.state,o=l.title,c=l.start,i=l.end,s=l.date,u=!!localStorage.getItem("token");return r.a.createElement(E.c,{className:t.card},r.a.createElement(E.e,{avatar:r.a.createElement(E.a,{"aria-label":"Info",className:t.avatar},"I"),title:"About ticket"}),r.a.createElement(E.d,null,r.a.createElement(E.m,{component:"p",variant:"subtitle1"},"Title: ",n.title),r.a.createElement(E.m,{component:"p",variant:"subtitle1"},"From: ",ue()(n.from).format("DD-MM-YYYY HH:mm")),r.a.createElement(E.m,{component:"p",variant:"subtitle1"},"To: ",ue()(n.to).format("DD-MM-YYYY HH:mm")),r.a.createElement(E.i,{className:t.expand,onClick:this.handleExpandClick,"aria-expanded":this.state.expanded,disabled:!(u&&a),color:"secondary","aria-label":"Correct ticket"},r.a.createElement(ge.a,null)),r.a.createElement(E.i,{color:"secondary",onClick:this.onDelete,disabled:!(u&&a),"aria-label":"Correct ticket"},r.a.createElement(Ee.a,null))),r.a.createElement(E.f,{in:this.state.expanded,timeout:"auto",unmountOnExit:!0},r.a.createElement(E.d,null,r.a.createElement("div",{className:"flexbox col"},r.a.createElement(E.l,{required:!0,placeholder:"Your event",id:"title",label:"Title",type:"text",name:"title",value:o,className:t.textField,InputLabelProps:{shrink:!0},onChange:this.onChange}),r.a.createElement(E.l,{id:"date",label:"Book room for new date",type:"date",name:"date",value:s,className:t.textField,inputProps:{min:ue()().format("YYYY-MM-DD")},InputLabelProps:{shrink:!0},onChange:this.onChange}),r.a.createElement(E.l,{id:"time",label:"Start event",type:"time",name:"start",value:c,className:t.textField,InputLabelProps:{shrink:!0},inputProps:{min:"10:00",max:"18:00",step:"1"},onChange:this.onChange}),r.a.createElement(E.l,{id:"time",label:"End event",type:"time",name:"end",value:i,className:"".concat(t.textField," ").concat(t.marginBottom),InputLabelProps:{shrink:!0},inputProps:{min:c,max:"18:00",step:"1"},onChange:this.onChange}),r.a.createElement(E.b,{color:"secondary",disabled:0===o.length,"aria-label":"Correct ticket",onClick:this.onCorrect},r.a.createElement(de.a,null))))))}}]),t}(n.Component),ke=Object(i.b)(function(e){return{tickets:e.tickets.tickets}},function(e){return{correctTicket:function(t,a){return e(function(e,t){return function(a){a(te());var n=e.from,r=e.to;(new Date).getTime()>n?a(ne("This time is already past")):n>r?a(ne("End must be later then start")):C.a.put("".concat("https://web-ninjas.net/ticket","/").concat(t),{from:n,to:r,title:"event"},X).then(function(){a(ee())}).catch(function(e){a(ne(e.message))})}}(t,a))},deleteTicket:function(t){return e(function(e){return function(t){C.a.delete("".concat(Q,"/").concat(e),X).then(function(e){t(ee())}).catch(function(e){t(ne(e.message))})}}(t))}}})(Object(v.withStyles)(function(e){return{root:{flexGrow:1,width:"100%"},margin:{margin:e.spacing.unit},marginBottom:{marginBottom:20},container:{color:"red"},textField:{color:"red"},avatar:{backgroundColor:"#C51161"}}})(ve)),Oe=function(e){function t(){var e,a;Object(d.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(p.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(r)))).state={open:!1},a.handleOpen=function(){a.setState({open:!0})},a.handleClose=function(){a.setState({open:!1})},a}return Object(g.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this.props,t=e.hours,a=e.currentDate,n=e.tickets,l=e.hallId,o=a.date,c=localStorage.getItem("userId"),i=n.filter(function(e){return e.hall_id===l}),s=i.filter(function(e){return e.user_id===c}),u=i.find(function(e){return ue()(o+"T"+t+":01").isBetween(e.from,e.to,"millisecond")}),m=s.find(function(e){return ue()(o+"T"+t+":01").isBetween(e.from,e.to,"millisecond")});return r.a.createElement("div",{className:"cell"},r.a.createElement("div",{className:"hours"},t,":00- ",t+1,":00"),r.a.createElement("div",{className:"mark ".concat(u?"booked":"free"," "),onClick:this.handleOpen},m&&r.a.createElement(E.m,null,"*")),r.a.createElement(E.g,{open:this.state.open,onClose:this.handleClose},u?r.a.createElement(ke,{date:o,hours:t,isMineBooking:m,isBookedTime:u}):r.a.createElement(pe,{date:o,hours:t})))}}]),t}(r.a.Component),ye=function(e){return r.a.createElement("div",{className:"day-scedule-wrapper"},r.a.createElement("div",{className:"day-scedule mb-20"},new Array(8).fill(null).map(function(t,a){return r.a.createElement(Oe,Object.assign({hours:10+a},e,{key:a}))})),r.a.createElement("div",{className:"flexbox align-center mb-20"},r.a.createElement("span",{className:"marker marker-free mr-20"}),r.a.createElement(E.m,{variant:"subtitle1"}," - is free")),r.a.createElement("div",{className:"flexbox align-center mb-20 "},r.a.createElement("span",{className:"marker marker-book mr-20"}),r.a.createElement(E.m,{variant:"subtitle1"}," - is booked")),r.a.createElement("div",{className:"flexbox align-center mb-20 "},r.a.createElement("span",{className:"mr-20"},"*"),r.a.createElement(E.m,{variant:"subtitle1"}," - your booking")))},Ce=a(194),Se=a.n(Ce),je=a(195),Ie=a.n(je),we=(a(434),a(435),function(e){function t(){var e,a;Object(d.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(p.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(r)))).state={},a}return Object(g.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this.props,t=e.tickets,a=e.currentDay,n=localStorage.getItem("currentHallId"),l=t.filter(function(e){return e.hall_id===n});return r.a.createElement("div",{className:"preview"},new Array(8).fill(null).map(function(e,t){var n=l.some(function(e){return ue()("".concat(ue()(a).format("YYYY-MM-DD"),"T1").concat(t,":01")).isBetween(e.from,e.to,"milliseconds")});return r.a.createElement("span",{key:t,className:"mark ".concat(n&&"booked")})}))}}]),t}(n.Component)),xe=Object(i.b)(function(e){return{tickets:e.tickets.tickets}})(we),Le=function(e){function t(){var e,a;Object(d.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(p.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(r)))).state={currentMonth:ue()(),selectedDate:ue()()},a.onDateClick=function(e){var t=a.props.onChangeDay;a.setState({selectedDate:e}),t(ue()(e).format("YYYY-MM-DD"))},a.nextMonth=function(){var e=a.state.currentMonth;a.setState({currentMonth:e.add(1,"month")})},a.prevMonth=function(){var e=a.state.currentMonth;a.setState({currentMonth:e.subtract(1,"month")})},a}return Object(g.a)(t,e),Object(h.a)(t,[{key:"renderHeader",value:function(){var e=this.state.currentMonth;return r.a.createElement("div",{className:"calendar-header flexbox align-center"},r.a.createElement(E.b,{onClick:this.prevMonth},r.a.createElement(Se.a,null)),r.a.createElement("span",null,ue()(e).format("MMMM YYYY")),r.a.createElement(E.b,{onClick:this.nextMonth},r.a.createElement(Ie.a,null)))}},{key:"renderDays",value:function(){for(var e=[],t=ue()().startOf("week"),a=0;a<7;a++)e.push(r.a.createElement("div",{className:"cell",key:a},t.add(1,"day").format("ddd")));return r.a.createElement("div",{className:"days flexbox"},e)}},{key:"renderCells",value:function(){for(var e=this,t=this.state,a=t.currentMonth,n=t.selectedDate,l=a.clone().startOf("month"),o=a.clone().endOf("month"),c=l.clone().startOf("isoWeek"),i=o.clone().endOf("isoWeek"),s=[],u=[],m=c,d="";m<=i;){for(var h=function(t){d=ue()(m).format("DD");var l=ue()(m),o=m;u.push(r.a.createElement("div",{className:"day ".concat(ue()(o).isSame(a,"month")?ue()(o).isSame(n,"day")?"selected":"":"disabled"),key:m,onClick:function(){return e.onDateClick(l)}},r.a.createElement(E.m,null,d),r.a.createElement(xe,{currentDay:l}))),m=m.add(1,"day")},p=0;p<7;p++)h();s.push(r.a.createElement("div",{className:"week",key:m},u)),u=[]}return r.a.createElement("div",{className:"body"},s)}},{key:"render",value:function(){return r.a.createElement("div",{className:"calendar"},this.renderHeader(),this.renderDays(),this.renderCells())}}]),t}(r.a.Component),Ne=function(e){function t(){var e,a;Object(d.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(p.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(r)))).state={date:ue()().format("YYYY-MM-DD"),start:"10:00",end:"11:00",open:!1},a.onChangeTime=function(e){var t=e.target,n=t.name,r=t.value,l=a.state.date;"start"===n&&a.setState({end:ue()("".concat(l,"T").concat(r,":00")).add(1,"hours").format("HH:00")}),a.setState(Object(b.a)({},n,r)),sessionStorage.setItem([n],r)},a.onChangeDay=function(e){a.setState({date:e})},a}return Object(g.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this,t=this.state.date;return r.a.createElement("div",null,r.a.createElement("form",{className:"roomscedule",noValidate:!0,onSubmit:this.onAdd},r.a.createElement("div",{className:"picker-container"},r.a.createElement(Le,{onChangeDay:function(t){return e.onChangeDay(t)}})),r.a.createElement(E.m,{variant:"h4",align:"center"},"Scedule for ",t),r.a.createElement(E.m,{variant:"subtitle1",align:"center"},"Click cell for more info"),r.a.createElement(ye,Object.assign({currentDate:this.state},this.props))))}}]),t}(r.a.Component),Te=Object(v.withStyles)(function(e){return{container:{display:"flex",flexWrap:"wrap"},textField:{width:400,marginBottom:20}}})(Ne),Ae=function(e){function t(){var e,a;Object(d.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(p.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(r)))).state={open:!0},a.handleOpen=function(){a.setState({open:!0})},a.handleClose=function(){a.setState({open:!1}),a.props.confirmErr(),a.handleOpen()},a}return Object(g.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){this.props.getTickets()}},{key:"render",value:function(){var e=this.props,t=e.classes,a=e.hall,n=e.hallsErr,l=e.tickets,o=e.ticketsErr,c=e.hallsLoading,i=e.ticketsLoading;if(c||i)return r.a.createElement(T,null,r.a.createElement(J,null));if(n||o){var s=n||o;return r.a.createElement(T,null,r.a.createElement(E.g,{open:this.state.open,onClose:this.handleClose,"aria-labelledby":"simple-dialog-title"},r.a.createElement(E.h,{id:"simple-dialog-title"},s)))}return a?r.a.createElement(T,null,a&&r.a.createElement(E.j,{className:t.root,elevation:1},r.a.createElement(E.m,{variant:"title",component:"h3"},a.title),r.a.createElement(E.a,{alt:a.title,src:a.imageURL,className:t.bigAvatar}),r.a.createElement(E.m,{variant:"subtitle1"},a.description),r.a.createElement(Te,{tickets:l,hallId:a._id}))):r.a.createElement(m.a,{exact:!0,to:"/"})}}]),t}(r.a.Component),_e=Object(i.b)(function(e,t){var a=t.match.params.hall_id;return{hallsErr:e.halls.err,tickets:e.tickets.tickets,ticketsErr:e.tickets.err,hallsLoading:e.halls.isLoading,ticketsLoading:e.tickets.isLoading,hall:e.halls.halls.find(function(e){return e._id===a})}},function(e){return{getTickets:function(){return e(ee())},confirmErr:function(){return e({type:"ERR_CONFIRM"})}}})(Object(v.withStyles)(function(e){return{root:Object(ie.a)({},e.mixins.gutters(),{paddingTop:2*e.spacing.unit,paddingBottom:4*e.spacing.unit,margin:20}),bigAvatar:{width:"100%",maxWidth:360,height:260,borderRadius:10,marginTop:2*e.spacing.unit,marginBottom:2*e.spacing.unit}}})(Ae)),De=a(128),Me=function(e){function t(){var e,a;Object(d.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(p.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(r)))).state={ticketsData:{labels:a.props.halls.map(function(e){return e.title}),datasets:[{label:"Count of tickets",backgroundColor:"rgb(255, 99, 132)",data:a.props.halls.map(function(e){return a.props.tickets.filter(function(t){return t.hall_id===e._id}).length})}]},ticketsOptions:{scales:{yAxes:[{ticks:{beginAtZero:!0,stepSize:1}}]},title:{display:!0,text:"Count of tickets",fontSize:20,fontColor:"#333"}},usersData:{labels:a.props.halls.map(function(e){return e.title}),datasets:[{label:"Count of users",backgroundColor:"rgb(255, 99, 132)",data:a.props.halls.map(function(e){return new Set(a.props.tickets.filter(function(t){return t.hall_id===e._id}).map(function(e){return e.user_id})).size})}]},usersOptions:{scales:{yAxes:[{ticks:{beginAtZero:!0,stepSize:1}}]},title:{display:!0,text:"Count of users",fontSize:20,fontColor:"#333"}}},a}return Object(g.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this.state,t=e.ticketsData,a=e.ticketsOptions,n=e.usersData,l=e.usersOptions;return 0===this.props.halls.length?r.a.createElement(m.a,{exact:!0,to:"/"}):r.a.createElement(T,null,r.a.createElement("div",{className:"flexbox col"},r.a.createElement("div",null,r.a.createElement(De.a,{data:t,options:a,height:300})),r.a.createElement("div",null,r.a.createElement(De.a,{data:n,options:l,height:300}))))}}]),t}(r.a.Component),Ye=Object(i.b)(function(e){return console.log(e),{tickets:e.tickets.tickets,halls:e.halls.halls}})(Me);var He=function(){var e=r.a.createElement(m.d,null,r.a.createElement(m.b,{exact:!0,path:"/",component:le}),r.a.createElement(m.b,{path:"/sign-up",component:ce}),r.a.createElement(m.b,{path:"/sign-in",component:M}),r.a.createElement(m.b,{path:"/hall/:hall_id",component:_e}),r.a.createElement(m.b,{path:"/statistics",component:Ye}));return r.a.createElement("div",null,e)};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Be={email:null,token:null,userId:null,err:null,loading:!1},Ue=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Be,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SIGNUP_SUCCESS":return Object(ie.a)({},e,{email:t.email,userId:t.userId,loading:!1});case"SIGNIN_SUCCESS":return Object(ie.a)({},e,{token:t.token,email:t.email,loading:!1});case"AUTH_FAIL":return Object(ie.a)({},e,{err:t.err,loading:!1});case"LOGOUT":return Object(ie.a)({},e,{token:null,userId:null});default:return e}},Fe={halls:[],err:null,isLoading:!1},Re=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Fe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOAD_HALLS_INIT":return Object(ie.a)({},e,{isLoading:!0});case"LOAD_HALLSLOAD_HALLS_SUCCES":return Object(ie.a)({},e,{halls:t.halls,isLoading:!1});case"LOAD_HALLSLOAD_HALLS_FAIL":return Object(ie.a)({},e,{err:t.err,isLoading:!1});case"ERR_CONFIRM":return Object(ie.a)({},e,{err:null});default:return e}},Pe={tickets:[],err:null,isLoading:!1},Ge=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Pe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_TICKETS_INIT":return Object(ie.a)({},e,{isLoading:!0});case"GET_TICKETS_SUCCESS":return Object(ie.a)({},e,{tickets:t.tickets,isLoading:!1});case"GET_TICKETS_FAIL":return Object(ie.a)({},e,{err:t.err,isLoading:!1});case"ERR_CONFIRM":return Object(ie.a)({},e,{err:null});default:return e}},ze=Object(s.c)({auth:Ue,halls:Re,tickets:Ge}),qe=s.d,Ke=Object(s.e)(ze,qe(Object(s.a)(u.a))),Ve=r.a.createElement(i.a,{store:Ke},r.a.createElement(c.a,{basename:"/booking_test"},r.a.createElement(He,null)));o.a.render(Ve,document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[265,1,2]]]);
//# sourceMappingURL=main.2cbcea76.chunk.js.map