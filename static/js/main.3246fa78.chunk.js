(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{168:function(e,t,a){},311:function(e,t,a){e.exports=a(580)},319:function(e,t,a){},320:function(e,t,a){},321:function(e,t,a){},322:function(e,t,a){},468:function(e,t,a){},471:function(e,t,a){},472:function(e,t,a){},570:function(e,t,a){},571:function(e,t,a){},572:function(e,t,a){},573:function(e,t,a){},574:function(e,t,a){},580:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(28),o=a.n(l),i=a(25),c=a(24),s=a(26),m=a(231),u=a(583),d=(a(319),a(55)),p=(a(320),a(168),a(14)),h=a(15),f=a(17),b=a(16),g=a(18),E=a(3),v=(a(321),a(45)),y=a(232),O=a.n(y),k=(a(322),a(43)),S=a.n(k),j="https://web-ninjas.net",C=function(e,t){return{type:"SIGNUP_SUCCESS",email:t,userId:e}},x=function(e,t){return{type:"SIGNIN_SUCCESS",token:e,userId:t}},w=function(e){return{type:"AUTH_FAIL",err:e}},I=function(e){function t(){var e,a;Object(p.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(f.a)(this,(e=Object(b.a)(t)).call.apply(e,[this].concat(r)))).state={open:!1},a.handleClose=function(){a.setState({open:!1})},a.handleOpen=function(){a.setState({open:!0})},a.handleLogout=function(){a.props.onLogOut(),a.setState({open:!1})},a}return Object(g.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=localStorage.getItem("token"),t=localStorage.getItem("email"),a=this.props.classes,n=r.a.createElement("div",null,r.a.createElement(i.b,{to:"/sign-in"},r.a.createElement(E.b,{variant:"contained",color:"secondary",className:a.margin},"Sign In")),r.a.createElement(i.b,{to:"/sign-up"},r.a.createElement(E.b,{variant:"contained",color:"secondary",className:a.margin},"Sign Up")));return e&&(n=r.a.createElement("div",null,r.a.createElement("div",{className:"controll"},r.a.createElement(E.b,{onClick:this.handleOpen},e&&r.a.createElement(E.n,{color:"secondary"},t),r.a.createElement(O.a,{color:"secondary"}))),r.a.createElement(E.l,{anchorOrigin:{vertical:"top",horizontal:"center"},open:this.state.open,onClose:this.handleClose,message:r.a.createElement(i.b,{to:"/"},r.a.createElement(E.b,{onClick:this.handleLogout,variant:"contained",color:"secondary"},"LogOut"))}))),r.a.createElement("div",{className:"header"},r.a.createElement(i.c,{exact:!0,to:"/"},r.a.createElement(E.n,{variant:"h1"},"BOOKING-TEST")),n)}}]),t}(r.a.Component),N=Object(c.b)(function(e){return{token:e.auth.token}},function(e){return{onLogOut:function(){return e((localStorage.clear(),sessionStorage.clear(),{type:"LOGOUT"}))}}})(Object(v.withStyles)(function(e){return{margin:{margin:e.spacing.unit}}})(I)),T=Object(v.withStyles)(function(e){return{footer:{display:"flex",justifyContent:"space-between",alignItems:"center",backgroundColor:"#111",padding:20}}})(function(e){var t=e.classes;return r.a.createElement("div",{className:t.footer},r.a.createElement(i.b,{to:"/statistics"},r.a.createElement(E.b,{variant:"contained",color:"secondary"},"Get Statistics")),r.a.createElement(E.n,{align:"right",color:"secondary"}," Made by Yaroslav Antonchyk "))}),D=function(e){return r.a.createElement("div",{className:"page"},r.a.createElement(N,null),r.a.createElement("div",{className:"page-content"},e.children),r.a.createElement(T,null))},_=a(108),A=a.n(_),L=a(110),Y=a.n(L),M=a(109),B=a.n(M),H=a(111),U=a.n(H),R=a(49),F=a.n(R),P=(a(468),function(e){function t(){var e,a;Object(p.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(f.a)(this,(e=Object(b.a)(t)).call.apply(e,[this].concat(r)))).clickHandler=function(){var e=a.props,t=e.roomNumber,n=e.hall._id;localStorage.setItem("currentRoom",t),localStorage.setItem("currentHallId",n)},a}return Object(g.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this.props.hall,t=e.title,a=e.description,n=e.imageURL,l=e._id;return r.a.createElement("div",{className:"room-listitem"},r.a.createElement(A.a,{className:"card"},r.a.createElement(i.b,{to:"/hall/".concat(l)},r.a.createElement(Y.a,{onClick:this.clickHandler},r.a.createElement(U.a,{className:"media",image:n,title:t}),r.a.createElement(B.a,null,r.a.createElement(F.a,{gutterBottom:!0,variant:"h5",component:"h2"},t),r.a.createElement(F.a,{component:"p"},a))))))}}]),t}(r.a.Component)),G=(a(471),{headers:{Authorization:localStorage.getItem("token")}}),Z=function(){return{type:"LOAD_HALLS_INIT"}},z=function(e){return{type:"LOAD_HALLS_SUCCES",halls:e}},K=function(e){return{type:"LOAD_HALLS_FAIL",err:e}},W=(a(472),function(){return r.a.createElement("div",{className:"Loader"},"Loading...")}),q="https://web-ninjas.net/tickets",$=function(){return function(e){e(J()),S.a.get("".concat(q)).then(function(t){var a=t.data;e(V(a))}).catch(function(t){e(Q(t.message))})}},J=function(){return{type:"GET_TICKETS_INIT"}},V=function(e){return{type:"GET_TICKETS_SUCCESS",tickets:e}},Q=function(e){return{type:"GET_TICKETS_FAIL",err:e}},X=function(e){function t(){var e,a;Object(p.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(f.a)(this,(e=Object(b.a)(t)).call.apply(e,[this].concat(r)))).state={open:!0},a.handleOpen=function(){a.setState({open:!0})},a.handleClose=function(){a.setState({open:!1})},a}return Object(g.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){this.props.loadHalls(),this.props.loadTickets()}},{key:"render",value:function(){var e=this.props,t=e.halls,a=e.err;return e.isLoading?r.a.createElement(D,null,r.a.createElement(W,null)):a?r.a.createElement(D,null,r.a.createElement(E.g,{open:this.state.open,onClose:this.handleClose,"aria-labelledby":"simple-dialog-title"},r.a.createElement(E.h,{id:"simple-dialog-title"},a))):r.a.createElement(D,null,r.a.createElement("div",{className:"dashboard"},t.map(function(e,t){return r.a.createElement(P,{hall:e,key:e._id,roomNumber:t})})))}}]),t}(r.a.Component),ee=Object(c.b)(function(e){return{halls:e.halls.halls,err:e.halls.err,isLoading:e.halls.isLoading}},function(e){return{loadHalls:function(){return e(function(e){e(Z()),S.a.get("https://web-ninjas.net/halls",G).then(function(t){var a=t.data.halls;e(z(a))}).catch(function(t){e(K(t.message))})})},loadTickets:function(){return e($())}}})(X),te=a(581),ae=function(e){var t={};return["email","password","country","birthdate"].forEach(function(a){e[a]||(t[a]="Required")}),e.email&&!/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i.test(e.email)&&(t.email="Invalid email address"),e.password&&e.password.length<6&&(t.password="Short password"),t},ne=a(582),re=a(68),le=function(e){var t=e.label,a=e.input,n=e.meta,l=n.touched,o=n.invalid,i=n.error,c=Object(re.a)(e,["label","input","meta"]);return r.a.createElement(E.m,Object.assign({label:t,placeholder:t,error:l&&o,helperText:l&&i},a,c))},oe=Object(te.a)({validate:ae,destroyOnUnmount:!1,forceUnregisterOnUnmount:!0,form:"formSignupRedux"})(Object(v.withStyles)(function(){return{marginBottom:{marginBottom:20},form:{width:300,marginTop:20,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"}}})(function(e){var t=e.handleSubmit,a=e.formData,n=e.classes,l=a?a.syncErrors:null;return r.a.createElement("form",{onSubmit:t,className:n.form},r.a.createElement("div",{className:n.marginBottom},r.a.createElement(ne.a,{name:"email",component:le,label:"Email",type:"email"})),r.a.createElement("div",{className:n.marginBottom},r.a.createElement(ne.a,{name:"password",component:le,label:"Password",type:"password"})),r.a.createElement(E.b,{type:"submit",variant:"contained",color:"secondary",disabled:!l||!(!l.email&&!l.password)},"Next"))})),ie=a(242),ce=a(234),se=a.n(ce),me=function(e){var t=e.label,a=e.input,n=e.meta;n.touched,n.invalid,n.error;return console.log(a),r.a.createElement("div",{style:{width:200}},r.a.createElement(ie.a,{placeholder:t,options:se()().getData(),onChange:function(e){return a.onChange(e)}}))},ue=function(e){var t=e.label,a=e.input,n=e.meta,l=n.touched,o=n.invalid,i=n.error,c=Object(re.a)(e,["label","input","meta"]);return r.a.createElement("div",{style:{width:200}},r.a.createElement(E.j,{htmlFor:"age-native-simple"},"Birthdate"),r.a.createElement(E.m,Object.assign({label:t,placeholder:t,error:l&&o,helperText:l&&i},a,c)))},de=Object(te.a)({validate:ae,destroyOnUnmount:!1,forceUnregisterOnUnmount:!0,form:"formSignupRedux"})(Object(v.withStyles)(function(){return{marginBottom:{marginBottom:20},form:{width:300,marginTop:20,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"}}})(function(e){var t=e.handleSubmit,a=e.formData,n=e.classes;return r.a.createElement("form",{onSubmit:t,className:n.form},r.a.createElement("div",null,r.a.createElement(ne.a,{name:"company",component:le,label:"Company",type:"text"})),r.a.createElement("br",null),r.a.createElement("div",null,r.a.createElement(ne.a,{name:"country",component:me,label:"country",type:"select"})),r.a.createElement("br",null),r.a.createElement("div",null,r.a.createElement(ne.a,{name:"birthdate",component:ue,type:"date"})),r.a.createElement("br",null),r.a.createElement(E.b,{type:"submit",variant:"contained",color:"secondary",disabled:!a||!!a.syncErrors},"Next"))})),pe=Object(te.a)({validate:ae,destroyOnUnmount:!1,forceUnregisterOnUnmount:!0,form:"formSignupRedux"})(Object(v.withStyles)(function(){return{marginBottom:{marginBottom:20},form:{width:300,marginTop:20,padding:20,display:"flex",flexDirection:"column"}}})(function(e){var t=e.handleSubmit,a=e.formData,n=e.classes;return console.log(a),r.a.createElement("form",{onSubmit:t,className:n.form},r.a.createElement(E.n,{variant:"subtitle1",className:n.marginBottom},"Your email: ",a.values.email),r.a.createElement(E.n,{variant:"subtitle1",className:n.marginBottom},"Your password: ",a.values.password),a.values.company&&r.a.createElement(E.n,{variant:"subtitle1",className:n.marginBottom},"Your company: ",a.values.company),r.a.createElement(E.n,{variant:"subtitle1",className:n.marginBottom},"Your country: ",a.values.country.label),r.a.createElement(E.n,{variant:"subtitle1",className:n.marginBottom},"Your birthday: ",a.values.birthdate),r.a.createElement(E.b,{variant:"contained",color:"secondary",type:"submit"},"Submit"))})),he=function(e){function t(){var e,a;Object(p.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(f.a)(this,(e=Object(b.a)(t)).call.apply(e,[this].concat(r)))).state={page:1},a.nextPage=function(){a.setState({page:a.state.page+1})},a.prevPage=function(){a.setState({page:a.state.page-1})},a}return Object(g.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,a=e.handleSubmit,n=e.formData,l=this.state.page;return r.a.createElement("div",{className:t.login},r.a.createElement(E.k,null,1===l&&r.a.createElement(oe,{handleSubmit:this.nextPage,formData:n}),2===l&&r.a.createElement(de,{handleSubmit:this.nextPage,formData:n}),3===l&&r.a.createElement(pe,{handleSubmit:a,formData:n}),r.a.createElement("div",{className:t.margin+" "+t.text},this.props.children)))}}]),t}(r.a.Component),fe=Object(te.a)({form:"formSignupRedux",validate:ae})(Object(v.withStyles)(function(){return{login:{display:"flex",alignItems:"center",justifyContent:"center"},margin:{margin:20},form:{width:300,marginTop:50,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},text:{display:"flex",alignItems:"center",justifyContent:"center"}}})(he)),be=function(e){function t(){var e,a;Object(p.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(f.a)(this,(e=Object(b.a)(t)).call.apply(e,[this].concat(r)))).state={open:!0},a.handleClose=function(){a.setState({open:!1})},a.handleError=function(){a.props.onConfirm()},a.handleSubmit=function(e){e.preventDefault();var t=a.props.formData.values;a.props.onSubmit(t)},a}return Object(g.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.isSignedUp,n=t.err,l=t.formData;return a?r.a.createElement(D,null,r.a.createElement("div",{className:"flexbox col align-center justify-center"},r.a.createElement(E.n,{align:"center",variant:"h3"},"Account created please "),r.a.createElement("br",null),r.a.createElement(i.b,{to:"/sign-in"},r.a.createElement(E.b,{variant:"text",color:"secondary"},r.a.createElement(E.n,{align:"center",variant:"h3"},"Login"))))):n?r.a.createElement(D,null,r.a.createElement(E.g,{open:!0,onClose:this.handleError,"aria-labelledby":"simple-dialog-title"},r.a.createElement(E.h,{id:"simple-dialog-title"},n))):r.a.createElement(D,null,r.a.createElement(fe,{handleSubmit:function(t){return e.handleSubmit(t)},formType:"Sign Up",formData:l},r.a.createElement(E.n,{align:"center"}," Have an account? "),r.a.createElement(i.b,{to:"/sign-in"},r.a.createElement(E.b,{variant:"text",color:"secondary"},"Login"))))}}]),t}(r.a.Component),ge=Object(c.b)(function(e){return{isSignedUp:null!==e.auth.userId,err:e.auth.err,formData:e.form.formSignupRedux}},function(e){return{onSubmit:function(t){var a=t.email,n=t.password;return e(function(e,t){return function(a){var n={email:e,password:t};S.a.post("".concat(j,"/signUp"),n).then(function(e){var t=e.data,n=t.id,r=t.email;localStorage.setItem("email",r),a(C(n,r))}).catch(function(e){a(w(e.message))})}}(a,n))},onConfirm:function(){return e(w(null))}}})(be),Ee=a(30),ve=a(51),ye=a(19),Oe=a.n(ye),ke=(a(570),a(571),a(572),a(115)),Se=a.n(ke),je=function(e){function t(){var e,a;Object(p.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(f.a)(this,(e=Object(b.a)(t)).call.apply(e,[this].concat(r)))).state={date:"".concat(a.props.date),start:"".concat(a.props.hours,":00"),end:"".concat(a.props.hours+1,":00"),title:"",open:!1},a.onChange=function(e){var t=e.target,n=t.name,r=t.value,l=a.state.date;"start"===n&&a.setState({end:Oe()("".concat(l,"T").concat(r,":00")).add(1,"hours").format("HH:00")}),a.setState(Object(ve.a)({},n,r))},a.onAdd=function(){var e=a.props,t=e.user_id,n=e.hall_id,r=a.state,l=r.date,o=r.start,i=r.end,c=r.title;a.props.postTicket({hall_id:n,user_id:t,from:new Date(l+"T"+o).getTime()+1,to:new Date(l+"T"+i).getTime()-1,title:c})},a}return Object(g.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this.props.classes,t=this.state,a=t.date,n=t.title,l=t.start,o=t.end,c=!!localStorage.getItem("token");return r.a.createElement("div",{className:"flexbox col pd-20"},r.a.createElement(E.m,{id:"title",placeholder:"Your event",required:!0,label:"Title",type:"text",name:"title",value:n,className:e.textField,InputLabelProps:{shrink:!0},onChange:this.onChange}),r.a.createElement(E.m,{id:"date",label:"Book room for date",type:"date",name:"date",value:a,className:e.textField,inputProps:{min:Oe()().format("YYYY-MM-DD")},InputLabelProps:{shrink:!0},onChange:this.onChange}),r.a.createElement(E.m,{id:"time",label:"Start event",type:"time",name:"start",value:l,className:e.textField,InputLabelProps:{shrink:!0},inputProps:{min:"10:00",max:"18:00",step:"1"},onChange:this.onChange}),r.a.createElement(E.m,{id:"time",label:"End event",type:"time",name:"end",value:o,className:"".concat(e.textField," ").concat(e.marginBottom),InputLabelProps:{shrink:!0},inputProps:{min:l,max:"18:00",step:"1"},onChange:this.onChange}),c?r.a.createElement(E.b,{color:"secondary",disabled:0===n.length,onClick:this.onAdd,"aria-label":"Done"},r.a.createElement(Se.a,null)):r.a.createElement(i.b,{to:"/sign-in"},r.a.createElement(E.b,{variant:"text",color:"secondary"},"Sign in to book")))}}]),t}(n.Component),Ce=Object(c.b)(function(e){return{tickets:e.tickets.tickets,user_id:e.auth.userId,hall_id:e.halls.currentHallId}},function(e){return{postTicket:function(t){return e(function(e){var t={headers:{Authorization:localStorage.getItem("token")}};return console.log(e),console.log(t),function(a){a(J());var n=e.from,r=e.to;(new Date).getTime()>n?a(Q("This time is already past")):n>r?a(Q("End must be later then start")):S.a.post(q,e,t).then(function(){a($())}).catch(function(e){a(Q(e.message))})}}(t))}}})(Object(v.withStyles)(function(e){return{root:{flexGrow:1,width:"100%"},margin:{margin:e.spacing.unit},marginBottom:{marginBottom:20},container:{color:"red"},textField:{color:"red"}}})(je)),xe=a(235),we=a.n(xe),Ie=a(236),Ne=a.n(Ie),Te=function(e){function t(){var e,a;Object(p.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(f.a)(this,(e=Object(b.a)(t)).call.apply(e,[this].concat(r)))).state={date:a.props.date,start:"".concat(a.props.hours,":00"),end:"".concat(a.props.hours+1,":00"),title:"",expanded:!1},a.onChange=function(e){var t=e.target,n=t.name,r=t.value,l=a.state.date;"start"===n&&a.setState({end:Oe()("".concat(l,"T").concat(r,":00")).add(1,"hours").format("HH:00")}),a.setState(Object(ve.a)({},n,r)),sessionStorage.setItem([n],r)},a.onCorrect=function(e){var t=a.props,n=t.correctTicket,r=t.hallId,l=t.isMineBooking,o=a.state,i=o.date,c=o.start,s=o.end;n({hall_id:r,user_id:localStorage.getItem("userId"),from:new Date("".concat(i,"T").concat(c)).getTime()+1,to:new Date("".concat(i,"T").concat(s)).getTime()-1},l._id)},a.onDelete=function(e){var t=a.props;(0,t.deleteTicket)(t.isMineBooking._id)},a.handleExpandClick=function(){a.setState(function(e){return{expanded:!e.expanded}})},a}return Object(g.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,a=e.isMineBooking,n=e.isBookedTime,l=this.state,o=l.title,i=l.start,c=l.end,s=l.date,m=!!localStorage.getItem("token");return r.a.createElement(E.c,{className:t.card},r.a.createElement(E.e,{avatar:r.a.createElement(E.a,{"aria-label":"Info",className:t.avatar},"I"),title:"About ticket"}),r.a.createElement(E.d,null,r.a.createElement(E.n,{component:"p",variant:"subtitle1"},"Title: ",n.title),r.a.createElement(E.n,{component:"p",variant:"subtitle1"},"From: ",Oe()(n.from).format("DD-MM-YYYY HH:mm")),r.a.createElement(E.n,{component:"p",variant:"subtitle1"},"To: ",Oe()(n.to).format("DD-MM-YYYY HH:mm")),r.a.createElement(E.i,{className:t.expand,onClick:this.handleExpandClick,"aria-expanded":this.state.expanded,disabled:!(m&&a),color:"secondary","aria-label":"Correct ticket"},r.a.createElement(we.a,null)),r.a.createElement(E.i,{color:"secondary",onClick:this.onDelete,disabled:!(m&&a),"aria-label":"Correct ticket"},r.a.createElement(Ne.a,null))),r.a.createElement(E.f,{in:this.state.expanded,timeout:"auto",unmountOnExit:!0},r.a.createElement(E.d,null,r.a.createElement("div",{className:"flexbox col"},r.a.createElement(E.m,{required:!0,placeholder:"Your event",id:"title",label:"Title",type:"text",name:"title",value:o,className:t.textField,InputLabelProps:{shrink:!0},onChange:this.onChange}),r.a.createElement(E.m,{id:"date",label:"Book room for new date",type:"date",name:"date",value:s,className:t.textField,inputProps:{min:Oe()().format("YYYY-MM-DD")},InputLabelProps:{shrink:!0},onChange:this.onChange}),r.a.createElement(E.m,{id:"time",label:"Start event",type:"time",name:"start",value:i,className:t.textField,InputLabelProps:{shrink:!0},inputProps:{min:"10:00",max:"18:00",step:"1"},onChange:this.onChange}),r.a.createElement(E.m,{id:"time",label:"End event",type:"time",name:"end",value:c,className:"".concat(t.textField," ").concat(t.marginBottom),InputLabelProps:{shrink:!0},inputProps:{min:i,max:"18:00",step:"1"},onChange:this.onChange}),r.a.createElement(E.b,{color:"secondary",disabled:0===o.length,"aria-label":"Correct ticket",onClick:this.onCorrect},r.a.createElement(Se.a,null))))))}}]),t}(n.Component),De=Object(c.b)(function(e){return{tickets:e.tickets.tickets}},function(e){return{correctTicket:function(t,a){return e(function(e,t){var a={headers:{Authorization:localStorage.getItem("token")}};return function(n){n(J());var r=e.from,l=e.to;(new Date).getTime()>r?n(Q("This time is already past")):r>l?n(Q("End must be later then start")):S.a.put("".concat("https://web-ninjas.net/ticket","/").concat(t),{from:r,to:l,title:"event"},a).then(function(){n($())}).catch(function(e){n(Q(e.message))})}}(t,a))},deleteTicket:function(t){return e(function(e){var t={headers:{Authorization:localStorage.getItem("token")}};return function(a){S.a.delete("".concat(q,"/").concat(e),t).then(function(e){a($())}).catch(function(e){a(Q(e.message))})}}(t))}}})(Object(v.withStyles)(function(e){return{root:{flexGrow:1,width:"100%"},margin:{margin:e.spacing.unit},marginBottom:{marginBottom:20},container:{color:"red"},textField:{color:"red"},avatar:{backgroundColor:"#C51161"}}})(Te)),_e=function(e){function t(){var e,a;Object(p.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(f.a)(this,(e=Object(b.a)(t)).call.apply(e,[this].concat(r)))).state={open:!1},a.handleOpen=function(){a.setState({open:!0})},a.handleClose=function(){a.setState({open:!1})},a}return Object(g.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this.props,t=e.hours,a=e.currentDate,n=e.tickets,l=e.hallId,o=a.date,i=localStorage.getItem("userId"),c=n.filter(function(e){return e.hall_id===l}),s=c.filter(function(e){return e.user_id===i}),m=c.find(function(e){return Oe()(o+"T"+t+":01").isBetween(e.from,e.to,"millisecond")}),u=s.find(function(e){return Oe()(o+"T"+t+":01").isBetween(e.from,e.to,"millisecond")});return r.a.createElement("div",{className:"cell"},r.a.createElement("div",{className:"hours"},t,":00- ",t+1,":00"),r.a.createElement("div",{className:"mark ".concat(m?"booked":"free"," "),onClick:this.handleOpen},u&&r.a.createElement(E.n,null,"*")),r.a.createElement(E.g,{open:this.state.open,onClose:this.handleClose},m?r.a.createElement(De,{date:o,hours:t,isMineBooking:u,isBookedTime:m}):r.a.createElement(Ce,{date:o,hours:t})))}}]),t}(r.a.Component),Ae=function(e){return r.a.createElement("div",{className:"day-scedule-wrapper"},r.a.createElement("div",{className:"day-scedule mb-20"},new Array(8).fill(null).map(function(t,a){return r.a.createElement(_e,Object.assign({hours:10+a},e,{key:a}))})),r.a.createElement("div",{className:"flexbox align-center mb-20"},r.a.createElement("span",{className:"marker marker-free mr-20"}),r.a.createElement(E.n,{variant:"subtitle1"}," - is free")),r.a.createElement("div",{className:"flexbox align-center mb-20 "},r.a.createElement("span",{className:"marker marker-book mr-20"}),r.a.createElement(E.n,{variant:"subtitle1"}," - is booked")),r.a.createElement("div",{className:"flexbox align-center mb-20 "},r.a.createElement("span",{className:"mr-20"},"*"),r.a.createElement(E.n,{variant:"subtitle1"}," - your booking")))},Le=a(237),Ye=a.n(Le),Me=a(238),Be=a.n(Me),He=(a(573),a(574),function(e){function t(){var e,a;Object(p.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(f.a)(this,(e=Object(b.a)(t)).call.apply(e,[this].concat(r)))).state={},a}return Object(g.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this.props,t=e.tickets,a=e.currentDay,n=localStorage.getItem("currentHallId"),l=t.filter(function(e){return e.hall_id===n});return r.a.createElement("div",{className:"preview"},new Array(8).fill(null).map(function(e,t){var n=l.some(function(e){return Oe()("".concat(Oe()(a).format("YYYY-MM-DD"),"T1").concat(t,":01")).isBetween(e.from,e.to,"milliseconds")});return r.a.createElement("span",{key:t,className:"mark ".concat(n&&"booked")})}))}}]),t}(n.Component)),Ue=Object(c.b)(function(e){return{tickets:e.tickets.tickets}})(He),Re=function(e){function t(){var e,a;Object(p.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(f.a)(this,(e=Object(b.a)(t)).call.apply(e,[this].concat(r)))).state={currentMonth:Oe()(),selectedDate:Oe()()},a.onDateClick=function(e){var t=a.props.onChangeDay;a.setState({selectedDate:e}),t(Oe()(e).format("YYYY-MM-DD"))},a.nextMonth=function(){var e=a.state.currentMonth;a.setState({currentMonth:e.add(1,"month")})},a.prevMonth=function(){var e=a.state.currentMonth;a.setState({currentMonth:e.subtract(1,"month")})},a}return Object(g.a)(t,e),Object(h.a)(t,[{key:"renderHeader",value:function(){var e=this.state.currentMonth;return r.a.createElement("div",{className:"calendar-header flexbox align-center"},r.a.createElement(E.b,{onClick:this.prevMonth},r.a.createElement(Ye.a,null)),r.a.createElement("span",null,Oe()(e).format("MMMM YYYY")),r.a.createElement(E.b,{onClick:this.nextMonth},r.a.createElement(Be.a,null)))}},{key:"renderDays",value:function(){for(var e=[],t=Oe()().startOf("week"),a=0;a<7;a++)e.push(r.a.createElement("div",{className:"cell",key:a},t.add(1,"day").format("ddd")));return r.a.createElement("div",{className:"days flexbox"},e)}},{key:"renderCells",value:function(){for(var e=this,t=this.state,a=t.currentMonth,n=t.selectedDate,l=a.clone().startOf("month"),o=a.clone().endOf("month"),i=l.clone().startOf("isoWeek"),c=o.clone().endOf("isoWeek"),s=[],m=[],u=i,d="";u<=c;){for(var p=function(t){d=Oe()(u).format("DD");var l=Oe()(u),o=u;m.push(r.a.createElement("div",{className:"day ".concat(Oe()(o).isSame(a,"month")?Oe()(o).isSame(n,"day")?"selected":"":"disabled"),key:u,onClick:function(){return e.onDateClick(l)}},r.a.createElement(E.n,null,d),r.a.createElement(Ue,{currentDay:l}))),u=u.add(1,"day")},h=0;h<7;h++)p();s.push(r.a.createElement("div",{className:"week",key:u},m)),m=[]}return r.a.createElement("div",{className:"body"},s)}},{key:"render",value:function(){return r.a.createElement("div",{className:"calendar"},this.renderHeader(),this.renderDays(),this.renderCells())}}]),t}(r.a.Component),Fe=function(e){function t(){var e,a;Object(p.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(f.a)(this,(e=Object(b.a)(t)).call.apply(e,[this].concat(r)))).state={date:Oe()().format("YYYY-MM-DD"),start:"10:00",end:"11:00",open:!1},a.onChangeTime=function(e){var t=e.target,n=t.name,r=t.value,l=a.state.date;"start"===n&&a.setState({end:Oe()("".concat(l,"T").concat(r,":00")).add(1,"hours").format("HH:00")}),a.setState(Object(ve.a)({},n,r)),sessionStorage.setItem([n],r)},a.onChangeDay=function(e){a.setState({date:e})},a}return Object(g.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this,t=this.state.date;return r.a.createElement("div",null,r.a.createElement("form",{className:"roomscedule",noValidate:!0,onSubmit:this.onAdd},r.a.createElement("div",{className:"picker-container"},r.a.createElement(Re,{onChangeDay:function(t){return e.onChangeDay(t)}})),r.a.createElement(E.n,{variant:"h4",align:"center"},"Schedule for ",t),r.a.createElement(E.n,{variant:"subtitle1",align:"center"},"Click cell for more info"),r.a.createElement(Ae,Object.assign({currentDate:this.state},this.props))))}}]),t}(r.a.Component),Pe=Object(v.withStyles)(function(){return{container:{display:"flex",flexWrap:"wrap"},textField:{width:400,marginBottom:20}}})(Fe),Ge=function(e){function t(){var e,a;Object(p.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(f.a)(this,(e=Object(b.a)(t)).call.apply(e,[this].concat(r)))).state={open:!0},a.handleOpen=function(){a.setState({open:!0})},a.handleClose=function(){a.setState({open:!1}),a.props.confirmErr(),a.handleOpen()},a}return Object(g.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.match.params.hall_id;this.props.setHallId(e)}},{key:"render",value:function(){var e=this.props,t=e.classes,a=e.hall,n=e.user_id,l=e.hallsErr,o=e.tickets,i=e.ticketsErr,c=e.hallsLoading,s=e.ticketsLoading;if(c||s)return r.a.createElement(D,null,r.a.createElement(W,null));if(l||i){var m=l||i;return r.a.createElement(D,null,r.a.createElement(E.g,{open:this.state.open,onClose:this.handleClose,"aria-labelledby":"simple-dialog-title"},r.a.createElement(E.h,{id:"simple-dialog-title"},m)))}return a?r.a.createElement(D,null,a&&r.a.createElement(E.k,{className:t.root,elevation:1},r.a.createElement(E.n,{variant:"title",component:"h3"},a.title),r.a.createElement(E.a,{alt:a.title,src:a.imageURL,className:t.bigAvatar}),r.a.createElement(E.n,{variant:"subtitle1"},a.description),r.a.createElement(Pe,{tickets:o,hallId:a._id,userId:n}))):r.a.createElement(d.a,{exact:!0,to:"/"})}}]),t}(r.a.Component),Ze=Object(c.b)(function(e,t){var a=t.match.params.hall_id;return{hallsErr:e.halls.err,tickets:e.tickets.tickets,ticketsErr:e.tickets.err,hallsLoading:e.halls.isLoading,ticketsLoading:e.tickets.isLoading,hall:e.halls.halls.find(function(e){return e._id===a}),user_id:e.auth.userId}},function(e){return{getTickets:function(){return e($())},confirmErr:function(){return e({type:"ERR_CONFIRM"})},setHallId:function(t){return e(function(e){return{type:"SET_HALL_ID",hall_id:e}}(t))}}})(Object(v.withStyles)(function(e){return{root:Object(Ee.a)({},e.mixins.gutters(),{paddingTop:2*e.spacing.unit,paddingBottom:4*e.spacing.unit,margin:20}),bigAvatar:{width:"100%",maxWidth:360,height:260,borderRadius:10,marginTop:2*e.spacing.unit,marginBottom:2*e.spacing.unit}}})(Ge)),ze=a(166),Ke=function(e){function t(){var e,a;Object(p.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(f.a)(this,(e=Object(b.a)(t)).call.apply(e,[this].concat(r)))).state={ticketsData:{labels:a.props.halls.map(function(e){return e.title}),datasets:[{label:"Count of tickets",backgroundColor:"rgb(255, 99, 132)",data:a.props.halls.map(function(e){return a.props.tickets.filter(function(t){return t.hall_id===e._id}).length})}]},ticketsOptions:{scales:{yAxes:[{ticks:{beginAtZero:!0}}]},title:{display:!0,text:"Count of tickets",fontSize:20,fontColor:"#333"}},usersData:{labels:a.props.halls.map(function(e){return e.title}),datasets:[{label:"Count of users",backgroundColor:"rgb(255, 99, 132)",data:a.props.halls.map(function(e){return new Set(a.props.tickets.filter(function(t){return t.hall_id===e._id}).map(function(e){return e.user_id})).size})}]},usersOptions:{scales:{yAxes:[{ticks:{beginAtZero:!0,stepSize:1}}]},title:{display:!0,text:"Count of users",fontSize:20,fontColor:"#333"}},timeData:{labels:a.props.halls.map(function(e){return e.title}),datasets:[{label:"Count of time",backgroundColor:"rgb(255, 99, 132)",data:a.props.halls.map(function(e){return a.props.tickets.filter(function(t){return t.hall_id===e._id}).length})}]},timeOptions:{scales:{yAxes:[{ticks:{beginAtZero:!0,stepSize:1}}]},title:{display:!0,text:"Count of time",fontSize:20,fontColor:"#333"}}},a}return Object(g.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this.state,t=e.ticketsData,a=e.ticketsOptions,n=e.usersData,l=e.usersOptions;return 0===this.props.halls.length?r.a.createElement(d.a,{exact:!0,to:"/"}):r.a.createElement(D,null,r.a.createElement("div",{className:"flexbox col"},r.a.createElement("div",null,r.a.createElement(ze.a,{data:t,options:a,height:300})),r.a.createElement("div",null,r.a.createElement(ze.a,{data:n,options:l,height:300}))))}}]),t}(r.a.Component),We=Object(c.b)(function(e){return console.log(e),{tickets:e.tickets.tickets,halls:e.halls.halls}})(Ke),qe=function(e){var t=e.label,a=e.input,n=e.meta,l=n.touched,o=n.invalid,i=n.error,c=Object(re.a)(e,["label","input","meta"]);return r.a.createElement(E.m,Object.assign({label:t,placeholder:t,error:l&&o,helperText:l&&i},a,c))},$e=(Object(te.a)({form:"formAuthRedux",validate:function(e){var t={};return["email","password"].forEach(function(a){e[a]||(t[a]="Required")}),e.email&&!/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i.test(e.email)&&(t.email="Invalid email address"),e.password&&e.password.length<6&&(t.password="Short password"),t}})(Object(v.withStyles)(function(){return{login:{display:"flex",alignItems:"center",justifyContent:"center"},margin:{margin:20},form:{width:300,marginTop:50,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},text:{display:"flex",alignItems:"center",justifyContent:"center"}}})(function(e){var t=e.classes,a=e.formType,n=e.handleSubmit,l=e.formData,o=!l||l.syncErrors;return r.a.createElement("div",{className:t.login},r.a.createElement(E.k,null,r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),n(e)},className:t.form},r.a.createElement("div",null,r.a.createElement(ne.a,{name:"email",component:qe,label:"Email",type:"email"})),r.a.createElement("br",null),r.a.createElement("div",null,r.a.createElement(ne.a,{name:"password",component:qe,label:"Password",type:"password"})),r.a.createElement("br",null),r.a.createElement(E.b,{variant:"contained",color:"secondary",type:"submit",className:t.button,disabled:!!o},a)),r.a.createElement("div",{className:t.margin+" "+t.text},e.children)))})),a(56)),Je=function(e){var t={};return["email","password"].forEach(function(a){e[a]||(t[a]="Required")}),e.email&&!/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i.test(e.email)&&(t.email="Invalid email address"),e.password&&e.password.length<6&&(t.password="Short password"),t},Ve=function(e){var t=e.field;return r.a.createElement(E.m,Object.assign({label:t.name,placeholder:t.name,type:t.name},t))},Qe=Object(v.withStyles)(function(){return{login:{display:"flex",alignItems:"center",justifyContent:"center"},marginTop:{marginTop:20},form:{width:300,marginTop:50,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},error:{color:"#faa"},text:{display:"flex",alignItems:"center",justifyContent:"center"}}})(function(e){var t=e.classes,a=e.handleSubmit;return r.a.createElement("div",{className:t.login},r.a.createElement(E.k,null,r.a.createElement($e.d,{initialValues:{email:"",password:""},validate:Je,onSubmit:function(e){a(e)}},function(e){var a=e.touched,n=e.errors;return r.a.createElement($e.c,{className:t.form},r.a.createElement($e.b,{type:"email",name:"email",render:Ve}),r.a.createElement($e.a,{name:"email",className:t.error,component:"div"}),r.a.createElement("div",{className:t.marginTop},r.a.createElement($e.b,{type:"password",name:"password",render:Ve})),r.a.createElement($e.a,{name:"password",className:t.error,component:"div"}),r.a.createElement(E.b,{type:"submit",variant:"contained",color:"secondary",disabled:!!n.email||!!n.password||!a.email,className:t.marginTop},"Login"))}),r.a.createElement("div",{className:t.margin+" "+t.text},e.children)))}),Xe=function(e){function t(){var e,a;Object(p.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(f.a)(this,(e=Object(b.a)(t)).call.apply(e,[this].concat(r)))).state={open:!1},a.handleOpen=function(){a.setState({open:!0})},a.handleClose=function(){a.setState({open:!1}),a.props.onClose()},a.handleSubmit=function(e){localStorage.setItem("email",e.email),a.props.onSubmit(e)},a}return Object(g.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this.props,t=e.err,a=e.formData;return e.isAuthenticated?r.a.createElement(d.a,{exact:!0,to:"/"}):t?r.a.createElement(D,null,r.a.createElement(E.g,{open:!0,onClose:this.handleClose,"aria-labelledby":"simple-dialog-title"},r.a.createElement(E.h,{id:"simple-dialog-title"},t))):r.a.createElement(D,null,r.a.createElement(Qe,{handleSubmit:this.handleSubmit,formData:a},r.a.createElement(E.n,{align:"center"},"Have no account?"),r.a.createElement(i.b,{to:"/sign-up"},r.a.createElement(E.b,{variant:"text",color:"secondary"},"Sign Up"))))}}]),t}(r.a.Component),et=Object(c.b)(function(e){return{err:e.auth.err,formData:e.form.formAuthRedux,isAuthenticated:!!localStorage.getItem("token")}},function(e){return{onSubmit:function(t){return e(function(e){return function(t){S.a.post("".concat(j,"/signIn"),e).then(function(e){var a=e.data,n=a.token,r=a._id;localStorage.setItem("token",n),localStorage.setItem("userId",r),t(x(n,r))}).catch(function(e){t(w(e.message))})}}(t))},onClose:function(){return e(w(null))}}})(Xe);var tt=function(){var e=r.a.createElement(d.d,null,r.a.createElement(d.b,{exact:!0,path:"/",component:ee}),r.a.createElement(d.b,{path:"/sign-up",component:ge}),r.a.createElement(d.b,{path:"/sign-in",component:et}),r.a.createElement(d.b,{path:"/hall/:hall_id",component:Ze}),r.a.createElement(d.b,{path:"/statistics",component:We}));return r.a.createElement("div",null,e)};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var at={email:null,token:null,userId:null,err:null,loading:!1},nt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:at,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SIGNUP_SUCCESS":return Object(Ee.a)({},e,{email:t.email,userId:t.userId,loading:!1});case"SIGNIN_SUCCESS":return Object(Ee.a)({},e,{token:t.token,userId:t.userId,loading:!1});case"AUTH_FAIL":return Object(Ee.a)({},e,{err:t.err,loading:!1});case"LOGOUT":return Object(Ee.a)({},e,{token:null,userId:null});default:return e}},rt={halls:[],currentHallId:null,err:null,isLoading:!1},lt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:rt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOAD_HALLS_INIT":return Object(Ee.a)({},e,{isLoading:!0});case"LOAD_HALLS_SUCCES":return Object(Ee.a)({},e,{halls:t.halls,isLoading:!1});case"LOAD_HALLS_FAIL":return Object(Ee.a)({},e,{err:t.err,isLoading:!1});case"SET_HALL_ID":return Object(Ee.a)({},e,{currentHallId:t.hall_id});case"ERR_CONFIRM":return Object(Ee.a)({},e,{err:null});default:return e}},ot={tickets:[],err:null,isLoading:!1},it=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ot,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_TICKETS_INIT":return Object(Ee.a)({},e,{isLoading:!0});case"GET_TICKETS_SUCCESS":return Object(Ee.a)({},e,{tickets:t.tickets,isLoading:!1});case"GET_TICKETS_FAIL":return Object(Ee.a)({},e,{err:t.err,isLoading:!1});case"ERR_CONFIRM":return Object(Ee.a)({},e,{err:null});default:return e}},ct=Object(s.c)({auth:nt,halls:lt,tickets:it,form:u.a}),st=s.d,mt=Object(s.e)(ct,st(Object(s.a)(m.a))),ut=r.a.createElement(c.a,{store:mt},r.a.createElement(i.a,{basename:"/booking_test"},r.a.createElement(tt,null)));o.a.render(ut,document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[311,1,2]]]);
//# sourceMappingURL=main.3246fa78.chunk.js.map