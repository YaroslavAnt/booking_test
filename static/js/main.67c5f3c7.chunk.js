(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{108:function(e,t,a){},225:function(e,t,a){e.exports=a(398)},234:function(e,t,a){},235:function(e,t,a){},236:function(e,t,a){},237:function(e,t,a){},386:function(e,t,a){},387:function(e,t,a){},390:function(e,t,a){},391:function(e,t,a){},393:function(e,t,a){},394:function(e,t,a){},395:function(e,t,a){},396:function(e,t,a){},397:function(e,t,a){},398:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(26),l=a.n(o),c=a(23),i=a(24),s=a(40),u=a(150),m=(a(234),a(39)),d=(a(235),a(108),a(16)),h=a(17),p=a(19),f=a(18),g=a(20),b=a(33),E=a(2),v=a(36),k=(a(236),a(152)),O=a.n(k),y=(a(237),a(34)),S=a.n(y),C="https://web-ninjas.net",j=function(e,t){return{type:"SIGNUP_SUCCESS",email:t,userId:e}},I=function(e){return{type:"SIGNIN_SUCCESS",token:e}},L=function(e){return{type:"AUTH_FAIL",err:e}},N=function(e){function t(){var e,a;Object(d.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(p.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(r)))).state={open:!1},a.handleClose=function(){a.setState({open:!1})},a.handleOpen=function(){a.setState({open:!0})},a}return Object(g.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=localStorage.getItem("token"),t=localStorage.getItem("email"),a=this.props.classes,n=r.a.createElement("div",null,r.a.createElement(c.b,{to:"/sign-in"},r.a.createElement(E.b,{variant:"contained",color:"secondary",className:a.margin},"Sign In")),r.a.createElement(c.b,{to:"/sign-up"},r.a.createElement(E.b,{variant:"contained",color:"secondary",className:a.margin},"Sign Up")));return e&&(n=r.a.createElement("div",null,r.a.createElement("div",{className:"controll"},r.a.createElement(E.b,{onClick:this.handleOpen},e&&r.a.createElement(E.m,{color:"secondary"},t),r.a.createElement(O.a,{color:"secondary"}))),r.a.createElement(E.k,{anchorOrigin:{vertical:"top",horizontal:"center"},open:this.state.open,onClose:this.handleClose,message:r.a.createElement(c.b,{to:"/"},r.a.createElement(E.b,{onClick:this.props.onLogOut,variant:"contained",color:"secondary"},"LogOut"))}))),r.a.createElement("div",{className:"header"},r.a.createElement(c.c,{exact:!0,to:"/"},r.a.createElement(E.m,{variant:"h1"},"BOOKING-TEST")),n)}}]),t}(r.a.Component),w=Object(i.b)(function(e){return{token:e.auth.token}},function(e){return{onLogOut:function(){return e((localStorage.clear(),sessionStorage.clear(),{type:"LOGOUT"}))}}})(Object(v.withStyles)(function(e){return{margin:{margin:e.spacing.unit}}})(N)),x=Object(v.withStyles)(function(e){return{footer:{backgroundColor:"#111",padding:20}}})(function(e){var t=e.classes;return r.a.createElement("div",{className:t.footer},r.a.createElement(E.m,{align:"right",color:"secondary"}," Made by Yaroslav Antonchyk "))}),T=function(e){return r.a.createElement("div",{className:"page"},r.a.createElement(w,null),r.a.createElement("div",{className:"page-content"},e.children),r.a.createElement(x,null))},A=(a(386),function(e){function t(){var e,a;Object(d.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(p.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(r)))).state={email:"",password:"",isVaild:!0},a.handleChange=function(e){return function(t){a.checkValid(),a.setState(Object(b.a)({},e,t.target.value))}},a.checkValid=function(){var e=a.state.email;a.setState({isVaild:/^[a-zA-Z0-9.!#$%&\u2019*+\/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/.test(e)})},a.handleSubmit=function(e){e.preventDefault(),a.props.userRequest(a.state),a.setState({email:"",password:""})},a}return Object(g.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,a=e.formType,n=this.state,o=n.email,l=n.password,c=n.isVaild;return r.a.createElement(T,null,r.a.createElement("div",{className:t.login},r.a.createElement(E.j,null,r.a.createElement("form",{onSubmit:this.handleSubmit,className:t.form},r.a.createElement(E.l,{error:!c,className:t.margin,name:"email",placeholder:"Email",value:o,onChange:this.handleChange("email")}),r.a.createElement("br",null),r.a.createElement(E.l,{className:t.margin,name:"password",type:"password",placeholder:"Password",value:l,onChange:this.handleChange("password")}),r.a.createElement("br",null),r.a.createElement(E.b,{variant:"contained",color:"secondary",type:"submit",className:t.button,disabled:!(o&&l&&c)},a)),r.a.createElement("div",{className:t.margin+" "+t.text},this.props.children))))}}]),t}(r.a.Component)),_=Object(v.withStyles)(function(){return{login:{display:"flex",alignItems:"center",justifyContent:"center"},margin:{margin:20},form:{height:260,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},text:{display:"flex",alignItems:"center"}}})(A),D=function(e){function t(){var e,a;Object(d.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(p.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(r)))).state={open:!1},a.handleOpen=function(){a.setState({open:!0})},a.handleClose=function(){a.setState({open:!1}),a.props.onClose()},a.handleRequest=function(e){var t=e.email;localStorage.setItem("email",t),a.props.onSubmit(e)},a}return Object(g.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this.props,t=e.isAuthenticated,a=e.err;return t?r.a.createElement(m.a,{exact:!0,to:"/"}):a?r.a.createElement(T,null,r.a.createElement(E.g,{open:!0,onClose:this.handleClose,"aria-labelledby":"simple-dialog-title"},r.a.createElement(E.h,{id:"simple-dialog-title"},a))):r.a.createElement(_,{userRequest:this.handleRequest,formType:"Login"},r.a.createElement(E.m,{align:"center"}," Have no account?"),r.a.createElement(c.b,{to:"/sign-up"},r.a.createElement(E.b,{variant:"text",color:"secondary"},"Sign Up ")))}}]),t}(r.a.Component),M=Object(i.b)(function(e){return{isAuthenticated:!!localStorage.getItem("token"),err:e.auth.err}},function(e){return{onSubmit:function(t){return e(function(e){return function(t){S.a.post("".concat(C,"/signIn"),e).then(function(e){var a=e.data,n=a.token,r=a._id;localStorage.setItem("token",n),localStorage.setItem("userId",r),t(I(n))}).catch(function(e){t(L(e.message))})}}(t))},onClose:function(){return e(L(null))}}})(D),Y=a(71),H=a.n(Y),B=a(73),U=a.n(B),F=a(72),R=a.n(F),P=a(74),G=a.n(P),q=a(37),K=a.n(q),z=(a(387),function(e){function t(){var e,a;Object(d.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(p.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(r)))).clickHandler=function(){var e=a.props,t=e.roomNumber,n=e.hall._id;localStorage.setItem("currentRoom",t),localStorage.setItem("currentHallId",n)},a}return Object(g.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this.props.hall,t=e.title,a=e.description,n=e.imageURL,o=e._id;return r.a.createElement("div",{className:"room-listitem"},r.a.createElement(H.a,{className:"card"},r.a.createElement(c.b,{to:"/hall/".concat(o)},r.a.createElement(U.a,{onClick:this.clickHandler},r.a.createElement(G.a,{className:"media",image:n,title:t}),r.a.createElement(R.a,null,r.a.createElement(K.a,{gutterBottom:!0,variant:"h5",component:"h2"},t),r.a.createElement(K.a,{component:"p"},a))))))}}]),t}(r.a.Component)),V=(a(390),{headers:{Authorization:localStorage.getItem("token")}}),W=function(){return{type:"LOAD_HALLS_INIT"}},Z=function(e){return{type:"LOAD_HALLSLOAD_HALLS_SUCCES",halls:e}},$=function(e){return{type:"LOAD_HALLSLOAD_HALLS_FAIL",err:e}},J=(a(391),function(){return r.a.createElement("div",{className:"Loader"},"Loading...")}),Q=function(e){function t(){var e,a;Object(d.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(p.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(r)))).state={open:!0},a.handleOpen=function(){a.setState({open:!0})},a.handleClose=function(){a.setState({open:!1})},a}return Object(g.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){this.props.onLoad()}},{key:"render",value:function(){var e=this.props,t=e.halls,a=e.err;return e.isLoading?r.a.createElement(T,null,r.a.createElement(J,null)):a?r.a.createElement(T,null,r.a.createElement(E.g,{open:this.state.open,onClose:this.handleClose,"aria-labelledby":"simple-dialog-title"},r.a.createElement(E.h,{id:"simple-dialog-title"},a))):r.a.createElement(T,null,r.a.createElement("div",{className:"dashboard"},t.map(function(e,t){return r.a.createElement(z,{hall:e,key:e._id,roomNumber:t})})))}}]),t}(r.a.Component),X=Object(i.b)(function(e){return{halls:e.halls.halls,err:e.halls.err,isLoading:e.halls.isLoading}},function(e){return{onLoad:function(){return e(function(e){e(W()),S.a.get("https://web-ninjas.net/halls",V).then(function(t){var a=t.data.halls;e(Z(a))}).catch(function(t){e($(t.message))})})}}})(Q),ee=function(e){function t(){var e,a;Object(d.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(p.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(r)))).state={open:!1},a.handleOpen=function(){a.setState({open:!0})},a.handleClose=function(){a.setState({open:!1}),a.props.onClose()},a.handleRequest=function(e){a.props.onSubmit(e),console.log(e)},a}return Object(g.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this.props,t=e.isSignedUp,a=e.err;return t?r.a.createElement(T,null,r.a.createElement("div",{className:"flexbox col align-center justify-center"},r.a.createElement(E.m,{align:"center",variant:"h3"},"Account created please "),r.a.createElement("br",null),r.a.createElement(c.b,{to:"/sign-in"},r.a.createElement(E.b,{variant:"text",color:"secondary"},r.a.createElement(E.m,{align:"center",variant:"h3"},"Login"))))):a?(console.log(a),r.a.createElement(T,null,r.a.createElement(E.g,{open:!0,onClose:this.handleClose,"aria-labelledby":"simple-dialog-title"},r.a.createElement(E.h,{id:"simple-dialog-title"},a)))):r.a.createElement(_,{userRequest:this.handleRequest,formType:"Sign Up"},r.a.createElement(E.m,{align:"center"}," Have an account? "),r.a.createElement(c.b,{to:"/sign-in"},r.a.createElement(E.b,{variant:"text",color:"secondary"},"Login")))}}]),t}(r.a.Component),te=Object(i.b)(function(e){return{isSignedUp:null!==e.auth.userId,err:e.auth.err}},function(e){return{onSubmit:function(t){var a=t.email,n=t.password;return e(function(e,t){return function(a){var n={email:e,password:t};S.a.post("".concat(C,"/signUp"),n).then(function(e){var t=e.data,n=t.id,r=t.email;localStorage.setItem("email",r),a(j(n,r))}).catch(function(e){console.log(e.response),a(L(e.message))})}}(a,n))},onClose:function(){return e(L(null))}}})(ee),ae=a(25),ne=a(12),re=a.n(ne),oe=(a(393),a(394),a(395),"https://web-ninjas.net/tickets"),le={headers:{Authorization:localStorage.getItem("token")}},ce=function(){return function(e){e(ie()),S.a.get("".concat(oe)).then(function(t){var a=t.data;e(se(a))}).catch(function(t){e(ue(t.message))})}},ie=function(){return{type:"GET_TICKETS_INIT"}},se=function(e){return{type:"GET_TICKETS_SUCCESS",tickets:e}},ue=function(e){return{type:"GET_TICKETS_FAIL",err:e}},me=a(77),de=a.n(me),he=function(e){function t(){var e,a;Object(d.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(p.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(r)))).state={date:"".concat(a.props.date),start:"".concat(a.props.hours,":00"),end:"".concat(a.props.hours+1,":00"),title:"",open:!1},a.onChange=function(e){var t=e.target,n=t.name,r=t.value,o=a.state.date;"start"===n&&a.setState({end:re()("".concat(o,"T").concat(r,":00")).add(1,"hours").format("HH:00")}),a.setState(Object(b.a)({},n,r))},a.onAdd=function(){var e=a.state,t=e.date,n=e.start,r=e.end,o=e.title;a.props.postTicket({hall_id:localStorage.getItem("currentHallId"),user_id:localStorage.getItem("userId"),from:new Date(t+"T"+n).getTime()+1,to:new Date(t+"T"+r).getTime()-1,title:o})},a}return Object(g.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this.props.classes,t=this.state,a=t.date,n=t.title,o=t.start,l=t.end,i=!!localStorage.getItem("token");return r.a.createElement("div",{className:"flexbox col pd-20"},r.a.createElement(E.l,{id:"title",placeholder:"Your event",required:!0,label:"Title",type:"text",name:"title",value:n,className:e.textField,InputLabelProps:{shrink:!0},onChange:this.onChange}),r.a.createElement(E.l,{id:"date",label:"Book room for date",type:"date",name:"date",value:a,className:e.textField,inputProps:{min:re()().format("YYYY-MM-DD")},InputLabelProps:{shrink:!0},onChange:this.onChange}),r.a.createElement(E.l,{id:"time",label:"Start event",type:"time",name:"start",value:o,className:e.textField,InputLabelProps:{shrink:!0},inputProps:{min:"10:00",max:"18:00",step:"1"},onChange:this.onChange}),r.a.createElement(E.l,{id:"time",label:"End event",type:"time",name:"end",value:l,className:"".concat(e.textField," ").concat(e.marginBottom),InputLabelProps:{shrink:!0},inputProps:{min:o,max:"18:00",step:"1"},onChange:this.onChange}),i?r.a.createElement(E.b,{color:"secondary",disabled:0===n.length,onClick:this.onAdd,"aria-label":"Done"},r.a.createElement(de.a,null)):r.a.createElement(c.b,{to:"/sign-in"},r.a.createElement(E.b,{variant:"text",color:"secondary"},"Sign in to book")))}}]),t}(n.Component),pe=Object(i.b)(function(e){return{tickets:e.tickets.tickets}},function(e){return{postTicket:function(t){return e((a=t,function(e){e(ie());var t=a.from,n=a.to;(new Date).getTime()>t?e(ue("This time is already past")):t>n?e(ue("End must be later then start")):S.a.post(oe,a,le).then(function(){e(ce())}).catch(function(t){e(ue(t.message))})}));var a}}})(Object(v.withStyles)(function(e){return{root:{flexGrow:1,width:"100%"},margin:{margin:e.spacing.unit},marginBottom:{marginBottom:20},container:{color:"red"},textField:{color:"red"}}})(he)),fe=a(153),ge=a.n(fe),be=a(154),Ee=a.n(be),ve=function(e){function t(){var e,a;Object(d.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(p.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(r)))).state={date:a.props.date,start:"".concat(a.props.hours,":00"),end:"".concat(a.props.hours+1,":00"),title:"",expanded:!1},a.onChange=function(e){var t=e.target,n=t.name,r=t.value,o=a.state.date;"start"===n&&a.setState({end:re()("".concat(o,"T").concat(r,":00")).add(1,"hours").format("HH:00")}),a.setState(Object(b.a)({},n,r)),sessionStorage.setItem([n],r)},a.onCorrect=function(e){var t=a.props,n=t.correctTicket,r=t.hallId,o=t.isMineBooking,l=a.state,c=l.date,i=l.start,s=l.end;n({hall_id:r,user_id:localStorage.getItem("userId"),from:new Date("".concat(c,"T").concat(i)).getTime()+1,to:new Date("".concat(c,"T").concat(s)).getTime()-1},o._id)},a.onDelete=function(e){var t=a.props;(0,t.deleteTicket)(t.isMineBooking._id)},a.handleExpandClick=function(){a.setState(function(e){return{expanded:!e.expanded}})},a}return Object(g.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,a=e.isMineBooking,n=e.isBookedTime,o=this.state,l=o.title,c=o.start,i=o.end,s=o.date,u=!!localStorage.getItem("token");return r.a.createElement(E.c,{className:t.card},r.a.createElement(E.e,{avatar:r.a.createElement(E.a,{"aria-label":"Info",className:t.avatar},"I"),title:"About ticket"}),r.a.createElement(E.d,null,r.a.createElement(E.m,{component:"p",variant:"subtitle1"},"Title: ",n.title),r.a.createElement(E.m,{component:"p",variant:"subtitle1"},"From: ",re()(n.from).format("DD-MM-YYYY HH:mm")),r.a.createElement(E.m,{component:"p",variant:"subtitle1"},"To: ",re()(n.to).format("DD-MM-YYYY HH:mm")),r.a.createElement(E.i,{className:t.expand,onClick:this.handleExpandClick,"aria-expanded":this.state.expanded,disabled:!(u&&a),color:"secondary","aria-label":"Correct ticket"},r.a.createElement(ge.a,null)),r.a.createElement(E.i,{color:"secondary",onClick:this.onDelete,disabled:!(u&&a),"aria-label":"Correct ticket"},r.a.createElement(Ee.a,null))),r.a.createElement(E.f,{in:this.state.expanded,timeout:"auto",unmountOnExit:!0},r.a.createElement(E.d,null,r.a.createElement("div",{className:"flexbox col"},r.a.createElement(E.l,{required:!0,placeholder:"Your event",id:"title",label:"Title",type:"text",name:"title",value:l,className:t.textField,InputLabelProps:{shrink:!0},onChange:this.onChange}),r.a.createElement(E.l,{id:"date",label:"Book room for new date",type:"date",name:"date",value:s,className:t.textField,inputProps:{min:re()().format("YYYY-MM-DD")},InputLabelProps:{shrink:!0},onChange:this.onChange}),r.a.createElement(E.l,{id:"time",label:"Start event",type:"time",name:"start",value:c,className:t.textField,InputLabelProps:{shrink:!0},inputProps:{min:"10:00",max:"18:00",step:"1"},onChange:this.onChange}),r.a.createElement(E.l,{id:"time",label:"End event",type:"time",name:"end",value:i,className:"".concat(t.textField," ").concat(t.marginBottom),InputLabelProps:{shrink:!0},inputProps:{min:c,max:"18:00",step:"1"},onChange:this.onChange}),r.a.createElement(E.b,{color:"secondary",disabled:0===l.length,"aria-label":"Correct ticket",onClick:this.onCorrect},r.a.createElement(de.a,null))))))}}]),t}(n.Component),ke=Object(i.b)(function(e){return{tickets:e.tickets.tickets}},function(e){return{correctTicket:function(t,a){return e(function(e,t){return function(a){a(ie());var n=e.from,r=e.to;(new Date).getTime()>n?a(ue("This time is already past")):n>r?a(ue("End must be later then start")):S.a.put("".concat("https://web-ninjas.net/ticket","/").concat(t),{from:n,to:r,title:"event"},le).then(function(){a(ce())}).catch(function(e){a(ue(e.message))})}}(t,a))},deleteTicket:function(t){return e(function(e){return function(t){S.a.delete("".concat(oe,"/").concat(e),le).then(function(e){t(ce())}).catch(function(e){t(ue(e.message))})}}(t))}}})(Object(v.withStyles)(function(e){return{root:{flexGrow:1,width:"100%"},margin:{margin:e.spacing.unit},marginBottom:{marginBottom:20},container:{color:"red"},textField:{color:"red"},avatar:{backgroundColor:"#C51161"}}})(ve)),Oe=function(e){function t(){var e,a;Object(d.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(p.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(r)))).state={open:!1},a.handleOpen=function(){a.setState({open:!0})},a.handleClose=function(){a.setState({open:!1})},a}return Object(g.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this.props,t=e.hours,a=e.currentDate,n=e.tickets,o=e.hallId,l=a.date,c=localStorage.getItem("userId"),i=n.filter(function(e){return e.hall_id===o}),s=i.filter(function(e){return e.user_id===c}),u=i.find(function(e){return re()(l+"T"+t+":01").isBetween(e.from,e.to,"millisecond")}),m=s.find(function(e){return re()(l+"T"+t+":01").isBetween(e.from,e.to,"millisecond")});return r.a.createElement("div",{className:"cell"},r.a.createElement("div",{className:"hours"},t,":00- ",t+1,":00"),r.a.createElement("div",{className:"mark ".concat(u?"booked":"free"," "),onClick:this.handleOpen},m&&r.a.createElement(E.m,null,"*")),r.a.createElement(E.g,{open:this.state.open,onClose:this.handleClose},u?r.a.createElement(ke,{date:l,hours:t,isMineBooking:m,isBookedTime:u}):r.a.createElement(pe,{date:l,hours:t})))}}]),t}(r.a.Component),ye=function(e){return r.a.createElement("div",{className:"day-scedule-wrapper"},r.a.createElement("div",{className:"day-scedule mb-20"},new Array(8).fill(null).map(function(t,a){return r.a.createElement(Oe,Object.assign({hours:10+a},e,{key:a}))})),r.a.createElement("div",{className:"flexbox align-center mb-20"},r.a.createElement("span",{className:"marker marker-free mr-20"}),r.a.createElement(E.m,{variant:"subtitle1"}," - is free")),r.a.createElement("div",{className:"flexbox align-center mb-20 "},r.a.createElement("span",{className:"marker marker-book mr-20"}),r.a.createElement(E.m,{variant:"subtitle1"}," - is booked")),r.a.createElement("div",{className:"flexbox align-center mb-20 "},r.a.createElement("span",{className:"mr-20"},"*"),r.a.createElement(E.m,{variant:"subtitle1"}," - your booking")))},Se=a(155),Ce=a.n(Se),je=a(156),Ie=a.n(je),Le=(a(396),a(397),function(e){function t(){var e,a;Object(d.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(p.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(r)))).state={},a}return Object(g.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this.props,t=e.tickets,a=e.currentDay,n=localStorage.getItem("currentHallId"),o=t.filter(function(e){return e.hall_id===n});return r.a.createElement("div",{className:"preview"},new Array(8).fill(null).map(function(e,t){var n=o.some(function(e){return re()("".concat(re()(a).format("YYYY-MM-DD"),"T1").concat(t,":01")).isBetween(e.from,e.to,"milliseconds")});return r.a.createElement("span",{key:t,className:"mark ".concat(n&&"booked")})}))}}]),t}(n.Component)),Ne=Object(i.b)(function(e){return{tickets:e.tickets.tickets}})(Le),we=function(e){function t(){var e,a;Object(d.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(p.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(r)))).state={currentMonth:re()(),selectedDate:re()()},a.onDateClick=function(e){var t=a.props.onChangeDay;a.setState({selectedDate:e}),t(re()(e).format("YYYY-MM-DD"))},a.nextMonth=function(){var e=a.state.currentMonth;a.setState({currentMonth:e.add(1,"month")})},a.prevMonth=function(){var e=a.state.currentMonth;a.setState({currentMonth:e.subtract(1,"month")})},a}return Object(g.a)(t,e),Object(h.a)(t,[{key:"renderHeader",value:function(){var e=this.state.currentMonth;return r.a.createElement("div",{className:"calendar-header flexbox align-center"},r.a.createElement(E.b,{onClick:this.prevMonth},r.a.createElement(Ce.a,null)),r.a.createElement("span",null,re()(e).format("MMMM YYYY")),r.a.createElement(E.b,{onClick:this.nextMonth},r.a.createElement(Ie.a,null)))}},{key:"renderDays",value:function(){for(var e=[],t=re()().startOf("week"),a=0;a<7;a++)e.push(r.a.createElement("div",{className:"cell",key:a},t.add(1,"day").format("ddd")));return r.a.createElement("div",{className:"days flexbox"},e)}},{key:"renderCells",value:function(){for(var e=this,t=this.state,a=t.currentMonth,n=t.selectedDate,o=a.clone().startOf("month"),l=a.clone().endOf("month"),c=o.clone().startOf("isoWeek"),i=l.clone().endOf("isoWeek"),s=[],u=[],m=c,d="";m<=i;){for(var h=function(t){d=re()(m).format("DD");var o=re()(m),l=m;u.push(r.a.createElement("div",{className:"day ".concat(re()(l).isSame(a,"month")?re()(l).isSame(n,"day")?"selected":"":"disabled"),key:m,onClick:function(){return e.onDateClick(o)}},r.a.createElement(E.m,null,d),r.a.createElement(Ne,{currentDay:o}))),m=m.add(1,"day")},p=0;p<7;p++)h();s.push(r.a.createElement("div",{className:"week",key:m},u)),u=[]}return r.a.createElement("div",{className:"body"},s)}},{key:"render",value:function(){return r.a.createElement("div",{className:"calendar"},this.renderHeader(),this.renderDays(),this.renderCells())}}]),t}(r.a.Component),xe=function(e){function t(){var e,a;Object(d.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(p.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(r)))).state={date:re()().format("YYYY-MM-DD"),start:"10:00",end:"11:00",open:!1},a.onChangeTime=function(e){var t=e.target,n=t.name,r=t.value,o=a.state.date;"start"===n&&a.setState({end:re()("".concat(o,"T").concat(r,":00")).add(1,"hours").format("HH:00")}),a.setState(Object(b.a)({},n,r)),sessionStorage.setItem([n],r)},a.onChangeDay=function(e){a.setState({date:e})},a}return Object(g.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this,t=this.state.date;return r.a.createElement("div",null,r.a.createElement("form",{className:"roomscedule",noValidate:!0,onSubmit:this.onAdd},r.a.createElement("div",{className:"picker-container"},r.a.createElement(we,{onChangeDay:function(t){return e.onChangeDay(t)}})),r.a.createElement(E.m,{variant:"h4",align:"center"},"Scedule for ",t),r.a.createElement(E.m,{variant:"subtitle1",align:"center"},"Click cell for more info"),r.a.createElement(ye,Object.assign({currentDate:this.state},this.props))))}}]),t}(r.a.Component),Te=Object(v.withStyles)(function(e){return{container:{display:"flex",flexWrap:"wrap"},textField:{width:400,marginBottom:20}}})(xe),Ae=function(e){function t(){var e,a;Object(d.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(p.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(r)))).state={open:!0},a.handleOpen=function(){a.setState({open:!0})},a.handleClose=function(){a.setState({open:!1}),a.props.confirmErr(),a.handleOpen()},a}return Object(g.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){this.props.getTickets()}},{key:"render",value:function(){var e=this.props,t=e.classes,a=e.hall,n=e.hallsErr,o=e.tickets,l=e.ticketsErr,c=e.hallsLoading,i=e.ticketsLoading;if(c||i)return r.a.createElement(T,null,r.a.createElement(J,null));if(n||l){var s=n||l;return r.a.createElement(T,null,r.a.createElement(E.g,{open:this.state.open,onClose:this.handleClose,"aria-labelledby":"simple-dialog-title"},r.a.createElement(E.h,{id:"simple-dialog-title"},s)))}return a?r.a.createElement(T,null,a&&r.a.createElement(E.j,{className:t.root,elevation:1},r.a.createElement(E.m,{variant:"title",component:"h3"},a.title),r.a.createElement(E.a,{alt:a.title,src:a.imageURL,className:t.bigAvatar}),r.a.createElement(E.m,{variant:"subtitle1"},a.description),r.a.createElement(Te,{tickets:o,hallId:a._id}))):r.a.createElement(m.a,{exact:!0,to:"/"})}}]),t}(r.a.Component),_e=Object(i.b)(function(e,t){var a=t.match.params.hall_id;return{hallsErr:e.halls.err,tickets:e.tickets.tickets,ticketsErr:e.tickets.err,hallsLoading:e.halls.isLoading,ticketsLoading:e.tickets.isLoading,hall:e.halls.halls.find(function(e){return e._id===a})}},function(e){return{getTickets:function(){return e(ce())},confirmErr:function(){return e({type:"ERR_CONFIRM"})}}})(Object(v.withStyles)(function(e){return{root:Object(ae.a)({},e.mixins.gutters(),{paddingTop:2*e.spacing.unit,paddingBottom:4*e.spacing.unit,margin:20}),bigAvatar:{width:"100%",maxWidth:360,height:260,borderRadius:10,marginTop:2*e.spacing.unit,marginBottom:2*e.spacing.unit}}})(Ae));var De=function(){var e=r.a.createElement(m.d,null,r.a.createElement(m.b,{exact:!0,path:"/",component:X}),r.a.createElement(m.b,{path:"/sign-up",component:te}),r.a.createElement(m.b,{path:"/sign-in",component:M}),r.a.createElement(m.b,{path:"/hall/:hall_id",component:_e}));return r.a.createElement("div",null,e)};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Me={email:null,token:null,userId:null,err:null,loading:!1},Ye=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Me,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SIGNUP_SUCCESS":return Object(ae.a)({},e,{email:t.email,userId:t.userId,loading:!1});case"SIGNIN_SUCCESS":return Object(ae.a)({},e,{token:t.token,email:t.email,loading:!1});case"AUTH_FAIL":return Object(ae.a)({},e,{err:t.err,loading:!1});case"LOGOUT":return Object(ae.a)({},e,{token:null,userId:null});default:return e}},He={halls:[],err:null,isLoading:!1},Be=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:He,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOAD_HALLS_INIT":return Object(ae.a)({},e,{isLoading:!0});case"LOAD_HALLSLOAD_HALLS_SUCCES":return Object(ae.a)({},e,{halls:t.halls,isLoading:!1});case"LOAD_HALLSLOAD_HALLS_FAIL":return Object(ae.a)({},e,{err:t.err,isLoading:!1});case"ERR_CONFIRM":return Object(ae.a)({},e,{err:null});default:return e}},Ue={tickets:[],err:null,isLoading:!1},Fe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ue,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_TICKETS_INIT":return Object(ae.a)({},e,{isLoading:!0});case"GET_TICKETS_SUCCESS":return Object(ae.a)({},e,{tickets:t.tickets,isLoading:!1});case"GET_TICKETS_FAIL":return Object(ae.a)({},e,{err:t.err,isLoading:!1});case"ERR_CONFIRM":return Object(ae.a)({},e,{err:null});default:return e}},Re=Object(s.c)({auth:Ye,halls:Be,tickets:Fe}),Pe=s.d,Ge=Object(s.e)(Re,Pe(Object(s.a)(u.a))),qe=r.a.createElement(i.a,{store:Ge},r.a.createElement(c.a,{basename:"/booking_test"},r.a.createElement(De,null)));l.a.render(qe,document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[225,1,2]]]);
//# sourceMappingURL=main.67c5f3c7.chunk.js.map